document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".card-bott"),t=document.querySelector(".filter-season"),n=1;function a(e){const t=(e-1)*n,a=t+n;c(jsonData.slice(t,a))}function c(t){e.innerHTML="",t.forEach((t=>{const n=document.createElement("figure"),a=document.createElement("figcaption");n.classList.add("card-box"),n.appendChild(a);const c=document.createElement("img");c.src=t.img,c.alt=t.alt,a.appendChild(c);const r=document.createElement("h2");r.classList.add("header-card"),r.innerText=t.head,a.appendChild(r);const d=document.createElement("p");d.classList.add("old-price"),d.innerText=t.saleprice,a.appendChild(d);const i=document.createElement("p");i.classList.add("new-price"),i.innerText=t.price,a.appendChild(i);const l=document.createElement("div");l.classList.add("input-block"),a.appendChild(l);const o=["40","41","42","43","44","45"];for(const e of o){const n=document.createElement("input");n.type="checkbox",n.id=`input-${t.id}-${e}`,n.value=e;const a=document.createElement("label");a.classList.add(`label${e}`),a.setAttribute("for",`input-${t.id}-${e}`),a.innerText=`${e}`,l.appendChild(n),l.appendChild(a)}const s=document.createElement("a");s.classList.add("cta-card"),s.setAttribute("data-value",t.id),s.innerText=t.cta,s.href=t.href,a.appendChild(s),e.appendChild(n)}))}function r(){for(var e=document.getElementById("pagination").getElementsByTagName("button"),t=0;t<e.length;t++){parseInt(e[t].innerText)===currentPage?e[t].disabled=!0:e[t].disabled=!1}}currentPage=1,totalPages=1,jsonData=[],fetch("products.json").then((e=>e.json())).then((e=>{jsonData=e,totalPages=Math.ceil(jsonData.length/n),a(currentPage),function(){var e=document.getElementById("pagination");e.innerHTML="";var t=document.createElement("button");t.innerText="←",t.onclick=function(){currentPage>1&&(currentPage--,a(currentPage),r())},e.appendChild(t);for(var n=1;n<=totalPages;n++){var c=document.createElement("button");c.innerText=n,c.onclick=function(){currentPage=parseInt(this.innerText),a(currentPage),r()},e.appendChild(c)}var d=document.createElement("button");d.innerText="→",d.onclick=function(){currentPage<totalPages&&(currentPage++,a(currentPage),r())},e.appendChild(d),r()}().then((e=>{t.addEventListener("change",(function(){const n=t.value;c("all"===n?e:e.filter((e=>e.category===n)))})),c(e);const n=document.querySelectorAll(".cta-card");console.log(n);let a=document.querySelector(".calc-added-products"),r=0,d=document.querySelector(".added-products-list "),i={};n.forEach((function(e){e.addEventListener("click",(function(e){let t=this.dataset.value;fetch("products.json").then((e=>e.json())).then((e=>{r++;const n=e.find((e=>e.id===t));if(a.innerText=r,i[n.id]){i[n.id].quantity++;const e=d.querySelector("#"+n.id+" .total-price span"),t=d.querySelector("#"+n.id+" .quantity-number");console.log(t),i[n.id].totalPrice=Number(i[n.id].product.price.slice(0,-4))*i[n.id].quantity,e.innerText=i[n.id].totalPrice+" грн",t.innerText=i[n.id].quantity}else{i[n.id]={product:n,quantity:1};const e=document.createElement("div");e.innerHTML=`\n                                        <div class="basket-card flex items-center" id=${n.id}>\n                                            <div class="basket-product-description flex items-center">\n                                                <img src=${n.img}>\n                                                <div class="description">\n                                                    <h3>${n.head}</h3>\n                                                    <table>\n                                                        <tr>\n                                                            <td>колір</td>\n                                                            <td></td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td>розмір</td>\n                                                            <td></td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td>ціна</td>\n                                                            <td>${n.price} <span>${n.saleprice}</span></td>\n                                                        </tr>\n                                                        <tr>\n                                                            <td>кількість</td>\n                                                            <td><div class="quantity flex">\n                                                                <div class="minus-quantity" data-value="${n.id}">-</div>\n    \n                                                                <div class="quantity-number">${i[n.id].quantity}</div>\n    \n                                                                <div class="plus-quantity" data-value="${n.id}">+</div>\n                                                            </div></td>\n                                                        </tr>\n                                                    </table>\n                                                    <div class="delete-product">видалити товар</div>\n                                                </div>\n                                            </div>\n                                            <div class="total-price">\n                                                <span>${Number(i[n.id].product.price.slice(0,-4))*i[n.id].quantity+" грн"}</span> \n                                            </div>\n                                        </div>\n                                    `,d.appendChild(e)}console.log(i)}))}))}))}))})).catch((e=>console.error("Помилка завантаження даних:",e)));const d=document.querySelector(".header-carousel"),i=document.querySelector(".winter"),l=document.querySelector(".summer"),o=document.querySelector(".arr-left"),s=document.querySelector(".arr-right");let u,p=0;function m(){0===p||100===p?(d.style.backgroundImage="url(../img/header-bg-1.jpg)",g(l,0,"none","0"),g(i,1,"inline","1")):50===p&&(d.style.backgroundImage="url(../img/header-background-2.jpg)",g(i,0,"none","0"),g(l,1,"inline","1")),p=(p+1)%101}function g(e,t,n,a){e.style.opacity=t,e.style.display=n;let c=setInterval((()=>{e.style.opacity=a,clearInterval(c)}),0)}function v(){m(),u=setInterval(m,100)}v(),o.addEventListener("click",h),s.addEventListener("click",h);let y=!0;function h(){if(y){y=!1,clearInterval(u),"1"==i.style.opacity?(d.style.backgroundImage="url(../img/header-background-2.jpg)",g(i,0,"none","0"),g(l,1,"inline","1")):(console.log(2),d.style.backgroundImage="url(../img/header-bg-1.jpg)",g(l,0,"none","0"),g(i,1,"inline","1"));let e=setInterval((()=>{y=!0,clearInterval(e)}),1e3);v()}}const f=document.querySelector(".cart"),b=document.querySelector(".basket-popup"),E=document.querySelector(".basket-back");function q(){b.classList.toggle("d-block")}f.addEventListener("click",q),E.addEventListener("click",q);const x=document.querySelectorAll(".range-input input"),k=document.querySelectorAll(".price-input input"),L=document.querySelector(".slider .progress");let I=1e3;k.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(k[0].value),n=parseInt(k[1].value);n-t>=I&&n<=x[1].max&&("input-min"===e.target.className?(x[0].value=t,L.style.left=t/x[0].max*100+"%"):(x[1].value=n,L.style.right=100-n/x[1].max*100+"%"))}))})),x.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(x[0].value),n=parseInt(x[1].value);n-t<I?"range-min"===e.target.className?x[0].value=n-I:x[1].value=t+I:(k[0].value=t,k[1].value=n,L.style.left=t/x[0].max*100+"%",L.style.right=100-n/x[1].max*100+"%")}))}))}));
