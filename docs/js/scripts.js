document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".burger"),t=document.querySelector(".top-nav");e.addEventListener("click",(function(){this.classList.toggle("active"),t.classList.toggle("activemobile")}));const n=document.querySelector(".mobile-filter"),r=document.querySelector(".filter"),c=document.querySelector(".cancel-filter");document.querySelector(".active-filter");n.addEventListener("click",(function(e){e.preventDefault(),r.classList.add("active-filter")})),c.addEventListener("click",(function(){r.classList.remove("active-filter")}));const d=document.querySelectorAll(".select");d.forEach((e=>{const t=e.querySelector(".select__in"),n=e.querySelectorAll(".select__item"),r=e.querySelector(".select__input"),c=new Event("change");t.addEventListener("click",(()=>{d.forEach((t=>{t!==e&&t.classList.remove("is-opened")})),e.classList.toggle("is-opened")})),n.forEach((d=>{d.addEventListener("click",(()=>{r.value=d.dataset.value,r.dispatchEvent(c),t.innerHTML=d.innerHTML,n.forEach((e=>{e.classList.remove("is-active")})),d.classList.add("is-active"),e.classList.remove("is-opened")}))}))})),document.addEventListener("click",(e=>{e.target.closest(".select")||d.forEach((e=>{e.classList.contains("is-opened")&&e.classList.remove("is-opened")}))})),document.addEventListener("keyup",(e=>{"Escape"==e.key&&d.forEach((e=>{e.classList.contains("is-opened")&&e.classList.remove("is-opened")}))})),orders.orderSum=0;const i=document.querySelector(".card-bott"),a=(document.querySelector(".filter-season"),12);let s=1,o=1,l=[];function u(e){const t=(e-1)*a,n=t+a,r=l.slice(t,n);var c;c=r,i.innerHTML="",c.forEach((e=>{console.log(e);const t=document.createElement("figure"),n=document.createElement("figcaption");if(""!==e.saleprice){const t=document.createElement("span"),r=100-100*parseFloat(e.price)/parseFloat(e.saleprice);t.classList.add("card-flag"),t.innerText=`sale -${r.toFixed(0)}%`,n.appendChild(t)}t.classList.add("card-box"),t.appendChild(n);const r=document.createElement("a");r.classList.add("click-card"),r.href="#",n.appendChild(r);const c=document.createElement("img");c.src=e.img,c.alt=e.alt,n.appendChild(c);const d=document.createElement("h2");d.classList.add("header-card"),d.innerText=e.head,n.appendChild(d);const a=document.createElement("p");a.classList.add("old-price"),a.innerText=e.saleprice,n.appendChild(a);const s=document.createElement("p");s.classList.add("new-price"),s.innerText=e.price,n.appendChild(s);const o=document.createElement("div");o.classList.add("input-block"),n.appendChild(o);const l=["40","41","42","43","44","45"];for(const t of l){const n=document.createElement("input");n.type="checkbox",n.id=`input-${e.id}-${t}`,n.value=t;const r=document.createElement("label");r.classList.add(`label${t}`),r.setAttribute("for",`input-${e.id}-${t}`),r.innerText=`${t}`,o.appendChild(n),o.appendChild(r)}const u=document.createElement("a");u.classList.add("cta-card"),u.setAttribute("data-value",e.id),u.innerText=e.cta,u.href=e.href,n.appendChild(u),i.appendChild(t)}))}function p(){var e=document.querySelector("#pagination");if(e.innerHTML="",o>1){e.appendChild(m("←","arrow-pag prev",(function(){s>1&&(s--,u(s),p(),v())})));const t=4,n=Math.floor(t/2),r=Math.max(1,s-n),c=Math.min(o,r+t-1);r>1&&(e.appendChild(m(1,"",(function(){s=1,u(s),p(),v()}))),r>2&&e.appendChild(m("...","ellipsis",(function(){}))));for(let t=r;t<=c;t++)!function(t){e.appendChild(m(t,t===s?"active":"",(function(){s=t,u(s),p(),v()})))}(t);c<o&&(c<o-1&&e.appendChild(m("...","ellipsis",(function(){}))),e.appendChild(m(o,"",(function(){s=o,u(s),p(),v()})))),e.appendChild(m("→","arrow-pag next",(function(){s<o&&(s++,u(s),p(),v())})))}}function m(e,t,n){const r=document.createElement("button");return r.innerText=e,r.className=t,r.onclick=n,r}function v(){const e=document.querySelector("#pagination").getElementsByTagName("button");for(var t=0;t<e.length;t++){parseInt(e[t].innerText)===s?(e[t].classList.add("current-page"),e[t].disabled=!0):(e[t].classList.remove("current-page"),e[t].disabled=!1)}}fetch("products.json").then((e=>e.json())).then((e=>{l=e,o=Math.ceil(l.length/a),u(s),p()})).catch((e=>console.error("Помилка завантаження даних:",e)));const f=document.querySelectorAll(".slider-images img"),h=document.querySelector(".arr-left"),y=document.querySelector(".arr-right"),q=document.querySelectorAll(".slide-description");let L=0;function g(){q[L].classList.remove("active"),f[L].classList.remove("active"),L=(L+1)%f.length,f[L].classList.add("active"),q[L].classList.add("active")}g();let S=setInterval(g,3e3);h.addEventListener("click",(function(){clearInterval(S),q[L].classList.remove("active"),f[L].classList.remove("active"),L=(L-1+f.length)%f.length,f[L].classList.add("active"),q[L].classList.add("active"),S=setInterval(g,3e3)})),y.addEventListener("click",(function(){clearInterval(S),g(),S=setInterval(g,3e3)}));const b=document.querySelector(".cart"),E=document.querySelector(".basket-popup"),k=document.querySelector(".basket-back"),x=document.querySelector(".added-products-list"),T=document.querySelector("body");function P(){E.classList.toggle("d-block"),T.classList.toggle("hidden")}x.style.height=window.innerHeight-300+"px",b.addEventListener("click",P),k.addEventListener("click",P);const M=document.querySelectorAll(".range-input input"),C=document.querySelectorAll(".price-input input"),O=document.querySelector(".slider .progress");let $=1e3;C.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(C[0].value),n=parseInt(C[1].value);n-t>=$&&n<=M[1].max&&("input-min"===e.target.className?(M[0].value=t,O.style.left=t/M[0].max*100+"%"):(M[1].value=n,O.style.right=100-n/M[1].max*100+"%"))}))})),M.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(M[0].value),n=parseInt(M[1].value);n-t<$?"range-min"===e.target.className?M[0].value=n-$:M[1].value=t+$:(C[0].value=t,C[1].value=n,O.style.left=t/M[0].max*100+"%",O.style.right=100-n/M[1].max*100+"%")}))}));let A=document.querySelector(".img-carousel"),D=document.querySelectorAll(".step-block");const I=document.querySelectorAll(".img-carousel img");console.log(A),function(){let e=0;D.forEach((function(t){e+=t.getBoundingClientRect().height,console.log(e)})),window,innerHeight>=960&&(A.style.height=e+40+"px")}();let N=0;setInterval((function(){I[N].classList.remove("active"),N=(N+1)%I.length,I[N].classList.add("active")}),3e3)}));let orderDetailSum=document.querySelector(".order-total-price"),numberOfProductsDOM=document.querySelector(".calc-added-products"),caclnumberOfProducts=0,addedProductsList=document.querySelector(".added-products-list "),orders={};const cartWaitTimeout=setTimeout((function(){cart()}),1e3);function cart(){if(document.querySelectorAll(".cta-card")){clearInterval(cartWaitTimeout);document.querySelectorAll(".cta-card");document.querySelectorAll(".cta-card").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const n=this.getAttribute("data-value"),r=[];document.querySelectorAll(`input[type="checkbox"][id^="input-${n}"]:checked`).forEach((e=>{r.push(e.value)})),console.log("Вибрані розміри для продукту з ID",n,":",r),function(e,t){let n=e.dataset.value,r="";fetch("products.json").then((e=>e.json())).then((e=>{const t=e.find((e=>e.id===n));if(orders[t.id]){caclnumberOfProducts++,numberOfProductsDOM.innerText=caclnumberOfProducts,orders[t.id].quantity++,orders.orderSum+=Number(orders[t.id].product.price.slice(0,-4));const e=addedProductsList.querySelector('[data-value="'+t.id+'"] .total-price span'),n=addedProductsList.querySelector('[data-value="'+t.id+'"] .quantity-number');orders[t.id].totalPrice=Number(orders[t.id].product.price.slice(0,-4))*orders[t.id].quantity,e.innerText=orders[t.id].totalPrice+" грн",n.innerText=orders[t.id].quantity}else setTimeout((()=>{console.log(document.querySelector(".minus-quantity[data-value='"+t.id+"']")),plusBtn(".plus-quantity[data-value='"+t.id+"']"),minBtn(".minus-quantity[data-value='"+t.id+"']")}),100),orders[t.id]={product:t,quantity:0},orders[t.id].quantity+=1,orders.orderSum+=Number(orders[t.id].product.price.slice(0,-4)),orders[t.id].size=r,function(e,t){fetch("products.json").then((e=>e.json())).then((n=>{const r=n.find((t=>t.id===e)),c=document.createElement("div");c.innerHTML=`\n                                    <div class="basket-card flex items-center" data-value=${r.id}>\n                                        <div class="basket-product-description flex items-center">\n                                            <img src=${r.img}>\n                                            <div class="description">\n                                                <h3>${r.head}</h3>\n                                                <table>\n                                                    <tr>\n                                                        <td>колір</td>\n                                                        <td></td>\n                                                    </tr>\n                                                    <tr>\n                                                        <td>розмір</td>\n                                                        <td class="size-span">${t}</td>\n                                                    </tr>\n                                                    <tr>\n                                                        <td>ціна</td>\n                                                        <td>${r.price} <span>${r.saleprice}</span></td>\n                                                    </tr>\n                                                    <tr>\n                                                        <td>кількість</td>\n                                                        <td><div class="quantity flex">\n                                                            <div class="minus-quantity" data-value="${r.id}">-</div>\n                \n                                                            <div class="quantity-number">${orders[r.id].quantity}</div>\n                \n                                                            <div class="plus-quantity" data-value="${r.id}">+</div>\n                                                        </div></td>\n                                                    </tr>\n                                                </table>\n                                                <div class="delete-product">видалити товар</div>\n                                            </div>\n                                        </div>\n                                        <div class="total-price">\n                                            <span>${Number(orders[r.id].product.price.slice(0,-4))*orders[r.id].quantity+" грн"}</span> \n                                        </div>\n                                    </div>\n                                `,addedProductsList.appendChild(c)}))}(n,r);orderDetailSum.innerText=orders.orderSum}))}(e)}))}))}}const inputMask=document.querySelector(".inputMask");function plusBtn(e){fetch("products.json").then((e=>e.json())).then((t=>{document.querySelector(e).addEventListener("click",(function(e){let n=this.dataset.value;const r=t.find((e=>e.id===n));if(orders[r.id]){orders[r.id].quantity=orders[r.id].quantity+1;const e=addedProductsList.querySelector('[data-value="'+r.id+'"] .total-price span'),t=addedProductsList.querySelector('[data-value="'+r.id+'"] .quantity-number');orders[r.id].totalPrice=Number(orders[r.id].product.price.slice(0,-4))*orders[r.id].quantity,e.innerText=orders[r.id].totalPrice+" грн",t.innerText=orders[r.id].quantity,orders.orderSum+=Number(orders[r.id].product.price.slice(0,-4))}orderDetailSum.innerText=orders.orderSum,caclnumberOfProducts++,console.log(numberOfProductsDOM),numberOfProductsDOM.innerText=caclnumberOfProducts}))}))}function minBtn(e){fetch("products.json").then((e=>e.json())).then((t=>{document.querySelector(e).addEventListener("click",(function(e){let n=this.dataset.value;const r=t.find((e=>e.id===n));if(orders[r.id]&&1!=orders[r.id].quantity){orders[r.id].quantity=orders[r.id].quantity-1;const e=addedProductsList.querySelector('[data-value="'+r.id+'"] .total-price span'),t=addedProductsList.querySelector('[data-value="'+r.id+'"] .quantity-number');orders[r.id].totalPrice=Number(orders[r.id].product.price.slice(0,-4))*orders[r.id].quantity,e.innerText=orders[r.id].totalPrice+" грн",t.innerText=orders[r.id].quantity,orders.orderSum-=Number(orders[r.id].product.price.slice(0,-4)),1!==t&&caclnumberOfProducts--,console.log(numberOfProductsDOM),numberOfProductsDOM.innerText=caclnumberOfProducts}orderDetailSum.innerText=orders.orderSum}))}))}inputMask.value="+38",inputMask.addEventListener("input",(function(){let e=inputMask.value;e.length>13?inputMask.value=e.slice(0,13):e.startsWith("+38")||(inputMask.value="+38"+e.slice(3))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".cta-card");console.log(e),e.forEach((function(e){e.addEventListener("click",(function(){alert(1);document.querySelectorAll(".plus-quantity");plusBtn()}))}))}));
