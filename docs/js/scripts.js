document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector(".calc-added-products"),t=0,n=document.querySelector(".added-products-list "),a={},r=document.querySelectorAll(".minus-quantity"),c=document.querySelector(".order-total-price");buyBtns=document.querySelectorAll(".cta-card"),a.orderSum=0;const i=document.querySelector(".card-bott"),l=(document.querySelector(".filter-season"),12);function d(d){const o=(d-1)*l,u=o+l,s=jsonData.slice(o,u);var p;p=s,i.innerHTML="",p.forEach((e=>{const t=document.createElement("figure"),n=document.createElement("figcaption");t.classList.add("card-box"),t.appendChild(n);const a=document.createElement("img");a.src=e.img,a.alt=e.alt,n.appendChild(a);const r=document.createElement("h2");r.classList.add("header-card"),r.innerText=e.head,n.appendChild(r);const c=document.createElement("p");c.classList.add("old-price"),c.innerText=e.saleprice,n.appendChild(c);const l=document.createElement("p");l.classList.add("new-price"),l.innerText=e.price,n.appendChild(l);const d=document.createElement("div");d.classList.add("input-block"),n.appendChild(d);const o=["40","41","42","43","44","45"];for(const t of o){const n=document.createElement("input");n.type="checkbox",n.id=`input-${e.id}-${t}`,n.value=t;const a=document.createElement("label");a.classList.add(`label${t}`),a.setAttribute("for",`input-${e.id}-${t}`),a.innerText=`${t}`,d.appendChild(n),d.appendChild(a)}const u=document.createElement("a");u.classList.add("cta-card"),u.setAttribute("data-value",e.id),u.innerText=e.cta,u.href=e.href,n.appendChild(u),i.appendChild(t)})),buyBtns=document.querySelectorAll(".cta-card"),buyBtns.forEach((function(i){i.addEventListener("click",(function(){console.log("btn clicked"),console.log(i),function(i){let l=i.dataset.value;fetch("products.json").then((e=>e.json())).then((i=>{t++;const d=i.find((e=>e.id===l));if(e.innerText=t,a[d.id]){console.log("already been"),a[d.id].quantity++,a.orderSum+=Number(a[d.id].product.price.slice(0,-4));const e=n.querySelector('[data-value="'+d.id+'"] .total-price span'),t=n.querySelector('[data-value="'+d.id+'"] .quantity-number');console.log(t),a[d.id].totalPrice=Number(a[d.id].product.price.slice(0,-4))*a[d.id].quantity,e.innerText=a[d.id].totalPrice+" грн",t.innerText=a[d.id].quantity}else{console.log("has not been"),a[d.id]={product:d,quantity:1},a.orderSum+=Number(a[d.id].product.price.slice(0,-4));const e=document.createElement("div");e.innerHTML=`\n                        <div class="basket-card flex items-center" data-value=${d.id}>\n                            <div class="basket-product-description flex items-center">\n                                <img src=${d.img}>\n                                <div class="description">\n                                    <h3>${d.head}</h3>\n                                    <table>\n                                        <tr>\n                                            <td>колір</td>\n                                            <td></td>\n                                        </tr>\n                                        <tr>\n                                            <td>розмір</td>\n                                            <td></td>\n                                        </tr>\n                                        <tr>\n                                            <td>ціна</td>\n                                            <td>${d.price} <span>${d.saleprice}</span></td>\n                                        </tr>\n                                        <tr>\n                                            <td>кількість</td>\n                                            <td><div class="quantity flex">\n                                                <div class="minus-quantity" data-value="${d.id}">-</div>\n\n                                                <div class="quantity-number">${a[d.id].quantity}</div>\n\n                                                <div class="plus-quantity" data-value="${d.id}">+</div>\n                                            </div></td>\n                                        </tr>\n                                    </table>\n                                    <div class="delete-product">видалити товар</div>\n                                </div>\n                            </div>\n                            <div class="total-price">\n                                <span>${Number(a[d.id].product.price.slice(0,-4))*a[d.id].quantity+" грн"}</span> \n                            </div>\n                        </div>\n                    `,n.appendChild(e)}console.log(a),r=document.querySelectorAll(".minus-quantity"),document.querySelectorAll(".plus-quantity").forEach((function(e){e.addEventListener("click",(function(e){let t=this.dataset.value;const r=i.find((e=>e.id===t));if(a[r.id]){a[r.id].quantity=a[r.id].quantity+1;const e=n.querySelector('[data-value="'+r.id+'"] .total-price span'),t=n.querySelector('[data-value="'+r.id+'"] .quantity-number');console.log("span more"),console.log(t),a[r.id].totalPrice=Number(a[r.id].product.price.slice(0,-4))*a[r.id].quantity,e.innerText=a[r.id].totalPrice+" грн",t.innerText=a[r.id].quantity,a.orderSum+=Number(a[r.id].product.price.slice(0,-4)),console.log(a)}c.innerText=a.orderSum}))})),r.forEach((function(e){e.addEventListener("click",(function(e){let t=this.dataset.value;const r=i.find((e=>e.id===t));if(a[r.id]&&1!=a[r.id].quantity){a[r.id].quantity=a[r.id].quantity-1;const e=n.querySelector('[data-value="'+r.id+'"] .total-price span'),t=n.querySelector('[data-value="'+r.id+'"] .quantity-number');console.log(t),a[r.id].totalPrice=Number(a[r.id].product.price.slice(0,-4))*a[r.id].quantity,e.innerText=a[r.id].totalPrice+" грн",t.innerText=a[r.id].quantity,a.orderSum-=Number(a[r.id].product.price.slice(0,-4)),console.log(a)}c.innerText=a.orderSum}))})),c.innerText=a.orderSum}))}(i)}))})),console.log(buyBtns)}function o(e,t,n){var a=document.createElement("button");return a.innerText=e,a.className=t,a.onclick=n,a}function u(){for(var e=document.getElementById("pagination").getElementsByTagName("button"),t=0;t<e.length;t++){parseInt(e[t].innerText)===currentPage?(e[t].classList.add("current-page"),e[t].disabled=!0):(e[t].classList.remove("current-page"),e[t].disabled=!1)}}currentPage=1,totalPages=1,jsonData=[],fetch("products.json").then((e=>e.json())).then((e=>{jsonData=e,totalPages=Math.ceil(jsonData.length/l),d(currentPage),function(){var e=document.querySelector("#pagination");e.innerHTML="",e.appendChild(o("←","arrow-pag prev",(function(){currentPage>1&&(currentPage--,d(currentPage),u())})));var t=4,n=Math.floor(t/2),a=Math.max(1,currentPage-n),r=Math.min(totalPages,a+t-1);a>1&&(e.appendChild(o(1,"",(function(){currentPage=1,d(currentPage),u()}))),a>2&&e.appendChild(o("...","ellipsis",(function(){}))));for(var c=a;c<=r;c++)e.appendChild(o(c,c===currentPage?"active":"",(function(){currentPage=parseInt(this.innerText),d(currentPage),u()})));r<totalPages&&(r<totalPages-1&&e.appendChild(o("...","ellipsis",(function(){}))),e.appendChild(o(totalPages,"",(function(){currentPage=totalPages,d(currentPage),u()})))),e.appendChild(o("→","arrow-pag next",(function(){currentPage<totalPages&&(currentPage++,d(currentPage),u())}))),u()}()})).catch((e=>console.error("Помилка завантаження даних:",e)));const s=document.querySelector(".header-carousel"),p=document.querySelector(".winter"),m=document.querySelector(".summer"),g=document.querySelector(".arr-left"),y=document.querySelector(".arr-right");let h,v=0;function f(){0===v||100===v?(s.style.backgroundImage="url(../img/header-bg-1.webp)",b(m,0,"none","0"),b(p,1,"inline","1")):50===v&&(s.style.backgroundImage="url(../img/header-background-2.webp)",b(p,0,"none","0"),b(m,1,"inline","1")),v=(v+1)%101}function b(e,t,n,a){e.style.opacity=t,e.style.display=n;let r=setInterval((()=>{e.style.opacity=a,clearInterval(r)}),0)}function q(){f(),h=setInterval(f,100)}q(),g.addEventListener("click",x),y.addEventListener("click",x);let S=!0;function x(){if(S){S=!1,clearInterval(h),"1"==p.style.opacity?(s.style.backgroundImage="url(../img/header-background-2.webp)",b(p,0,"none","0"),b(m,1,"inline","1")):(console.log(2),s.style.backgroundImage="url(../img/header-bg-1.webp)",b(m,0,"none","0"),b(p,1,"inline","1"));let e=setInterval((()=>{S=!0,clearInterval(e)}),1e3);q()}}const E=document.querySelector(".cart"),P=document.querySelector(".basket-popup"),k=document.querySelector(".basket-back"),L=document.querySelector(".added-products-list"),T=document.querySelector("body");function C(){P.classList.toggle("d-block"),T.classList.toggle("hidden")}L.style.height=window.innerHeight-300+"px",E.addEventListener("click",C),k.addEventListener("click",C);const I=document.querySelectorAll(".range-input input"),$=document.querySelectorAll(".price-input input"),N=document.querySelector(".slider .progress");let w=1e3;$.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt($[0].value),n=parseInt($[1].value);n-t>=w&&n<=I[1].max&&("input-min"===e.target.className?(I[0].value=t,N.style.left=t/I[0].max*100+"%"):(I[1].value=n,N.style.right=100-n/I[1].max*100+"%"))}))})),I.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(I[0].value),n=parseInt(I[1].value);n-t<w?"range-min"===e.target.className?I[0].value=n-w:I[1].value=t+w:($[0].value=t,$[1].value=n,N.style.left=t/I[0].max*100+"%",N.style.right=100-n/I[1].max*100+"%")}))}));let A=document.querySelector(".img-carousel"),j=1,M=document.querySelectorAll(".step-block");console.log(A),function(){console.log("func");let e=0;M.forEach((function(t){e+=t.getBoundingClientRect().height,console.log(e)})),A.style.height=e+40+"px"}(),setInterval((function(){let e;switch(console.log(4),j){case 1:default:e="url(../img/frst-change.png)";break;case 2:e="url(../img/sec-change.png)";break;case 3:e="url(../img/three-change.png)";break;case 4:e="url(../img/last-change.png)"}A.style.backgroundImage=e,j=j<4?j+1:1}),5e3)}));
