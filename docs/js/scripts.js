document.addEventListener("DOMContentLoaded",(function(){orders.orderSum=0;const e=document.querySelector(".card-bott"),t=(document.querySelector(".filter-season"),12);function r(r){const n=(r-1)*t,d=n+t,a=jsonData.slice(n,d);var c;c=a,e.innerHTML="",c.forEach((t=>{const r=document.createElement("figure"),n=document.createElement("figcaption");r.classList.add("card-box"),r.appendChild(n);const d=document.createElement("img");d.src=t.img,d.alt=t.alt,n.appendChild(d);const a=document.createElement("h2");a.classList.add("header-card"),a.innerText=t.head,n.appendChild(a);const c=document.createElement("p");c.classList.add("old-price"),c.innerText=t.saleprice,n.appendChild(c);const i=document.createElement("p");i.classList.add("new-price"),i.innerText=t.price,n.appendChild(i);const o=document.createElement("div");o.classList.add("input-block"),n.appendChild(o);const l=["40","41","42","43","44","45"];for(const e of l){const r=document.createElement("input");r.type="checkbox",r.id=`input-${t.id}-${e}`,r.value=e;const n=document.createElement("label");n.classList.add(`label${e}`),n.setAttribute("for",`input-${t.id}-${e}`),n.innerText=`${e}`,o.appendChild(r),o.appendChild(n)}const u=document.createElement("a");u.classList.add("cta-card"),u.setAttribute("data-value",t.id),u.innerText=t.cta,u.href=t.href,n.appendChild(u),e.appendChild(r)}))}function n(e,t,r){var n=document.createElement("button");return n.innerText=e,n.className=t,n.onclick=r,n}function d(){for(var e=document.getElementById("pagination").getElementsByTagName("button"),t=0;t<e.length;t++){parseInt(e[t].innerText)===currentPage?(e[t].classList.add("current-page"),e[t].disabled=!0):(e[t].classList.remove("current-page"),e[t].disabled=!1)}}currentPage=1,totalPages=1,jsonData=[],fetch("products.json").then((e=>e.json())).then((e=>{jsonData=e,totalPages=Math.ceil(jsonData.length/t),r(currentPage),function(){var e=document.querySelector("#pagination");e.innerHTML="",e.appendChild(n("←","arrow-pag prev",(function(){currentPage>1&&(currentPage--,r(currentPage),d())})));var t=4,a=Math.floor(t/2),c=Math.max(1,currentPage-a),i=Math.min(totalPages,c+t-1);c>1&&(e.appendChild(n(1,"",(function(){currentPage=1,r(currentPage),d()}))),c>2&&e.appendChild(n("...","ellipsis",(function(){}))));for(var o=c;o<=i;o++)e.appendChild(n(o,o===currentPage?"active":"",(function(){currentPage=parseInt(this.innerText),r(currentPage),d()})));i<totalPages&&(i<totalPages-1&&e.appendChild(n("...","ellipsis",(function(){}))),e.appendChild(n(totalPages,"",(function(){currentPage=totalPages,r(currentPage),d()})))),e.appendChild(n("→","arrow-pag next",(function(){currentPage<totalPages&&(currentPage++,r(currentPage),d())}))),d()}()})).catch((e=>console.error("Помилка завантаження даних:",e)));const a=document.querySelector(".header-carousel"),c=document.querySelector(".winter"),i=document.querySelector(".summer"),o=document.querySelector(".arr-left"),l=document.querySelector(".arr-right");let u,s=0;function p(){0===s||100===s?(a.style.backgroundImage="url(../img/header-bg-1.webp)",m(i,0,"none","0"),m(c,1,"inline","1")):50===s&&(a.style.backgroundImage="url(../img/header-background-2.webp)",m(c,0,"none","0"),m(i,1,"inline","1")),s=(s+1)%101}function m(e,t,r,n){e.style.opacity=t,e.style.display=r;let d=setInterval((()=>{e.style.opacity=n,clearInterval(d)}),0)}function g(){p(),u=setInterval(p,100)}g(),o.addEventListener("click",h),l.addEventListener("click",h);let y=!0;function h(){if(y){y=!1,clearInterval(u),"1"==c.style.opacity?(a.style.backgroundImage="url(../img/header-background-2.webp)",m(c,0,"none","0"),m(i,1,"inline","1")):(a.style.backgroundImage="url(../img/header-bg-1.webp)",m(i,0,"none","0"),m(c,1,"inline","1"));let e=setInterval((()=>{y=!0,clearInterval(e)}),1e3);g()}}const f=document.querySelector(".cart"),v=document.querySelector(".basket-popup"),q=document.querySelector(".basket-back"),b=document.querySelector(".added-products-list"),P=document.querySelector("body");function S(){v.classList.toggle("d-block"),P.classList.toggle("hidden")}b.style.height=window.innerHeight-300+"px",f.addEventListener("click",S),q.addEventListener("click",S);const L=document.querySelectorAll(".range-input input"),x=document.querySelectorAll(".price-input input"),E=document.querySelector(".slider .progress");let k=1e3;x.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(x[0].value),r=parseInt(x[1].value);r-t>=k&&r<=L[1].max&&("input-min"===e.target.className?(L[0].value=t,E.style.left=t/L[0].max*100+"%"):(L[1].value=r,E.style.right=100-r/L[1].max*100+"%"))}))})),L.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(L[0].value),r=parseInt(L[1].value);r-t<k?"range-min"===e.target.className?L[0].value=r-k:L[1].value=t+k:(x[0].value=t,x[1].value=r,E.style.left=t/L[0].max*100+"%",E.style.right=100-r/L[1].max*100+"%")}))}));let T=document.querySelector(".img-carousel"),C=1,I=document.querySelectorAll(".step-block");console.log(T),function(){console.log("func");let e=0;I.forEach((function(t){e+=t.getBoundingClientRect().height,console.log(e)})),T.style.height=e+40+"px"}(),setInterval((function(){let e;switch(console.log(4),C){case 1:default:e="url(../img/frst-change.png)";break;case 2:e="url(../img/sec-change.png)";break;case 3:e="url(../img/three-change.png)";break;case 4:e="url(../img/last-change.png)"}T.style.backgroundImage=e,C=C<4?C+1:1}),5e3)}));let minusQuantity=document.querySelectorAll(".minus-quantity"),orderDetailSum=document.querySelector(".order-total-price"),numberOfProductsDOM=document.querySelector(".calc-added-products"),caclnumberOfProducts=0,addedProductsList=document.querySelector(".added-products-list "),orders={};const cartWaitTimeout=setTimeout((function(){cart()}),1e3);function cart(){if(document.querySelectorAll(".cta-card")){clearInterval(cartWaitTimeout),document.querySelectorAll(".cta-card").forEach((function(e){e.addEventListener("click",(function(){console.log("btn clicked"),console.log(e),function(e){let t=e.dataset.value;fetch("products.json").then((e=>e.json())).then((e=>{caclnumberOfProducts++;const r=e.find((e=>e.id===t));if(numberOfProductsDOM.innerText=caclnumberOfProducts,orders[r.id]){orders[r.id].quantity++,orders.orderSum+=Number(orders[r.id].product.price.slice(0,-4));const e=addedProductsList.querySelector('[data-value="'+r.id+'"] .total-price span'),t=addedProductsList.querySelector('[data-value="'+r.id+'"] .quantity-number');orders[r.id].totalPrice=Number(orders[r.id].product.price.slice(0,-4))*orders[r.id].quantity,e.innerText=orders[r.id].totalPrice+" грн",t.innerText=orders[r.id].quantity}else{orders[r.id]={product:r,quantity:1},orders.orderSum+=Number(orders[r.id].product.price.slice(0,-4));const e=document.createElement("div");e.innerHTML=`\n                            <div class="basket-card flex items-center" data-value=${r.id}>\n                                <div class="basket-product-description flex items-center">\n                                    <img src=${r.img}>\n                                    <div class="description">\n                                        <h3>${r.head}</h3>\n                                        <table>\n                                            <tr>\n                                                <td>колір</td>\n                                                <td></td>\n                                            </tr>\n                                            <tr>\n                                                <td>розмір</td>\n                                                <td></td>\n                                            </tr>\n                                            <tr>\n                                                <td>ціна</td>\n                                                <td>${r.price} <span>${r.saleprice}</span></td>\n                                            </tr>\n                                            <tr>\n                                                <td>кількість</td>\n                                                <td><div class="quantity flex">\n                                                    <div class="minus-quantity" data-value="${r.id}">-</div>\n        \n                                                    <div class="quantity-number">${orders[r.id].quantity}</div>\n        \n                                                    <div class="plus-quantity" data-value="${r.id}">+</div>\n                                                </div></td>\n                                            </tr>\n                                        </table>\n                                        <div class="delete-product">видалити товар</div>\n                                    </div>\n                                </div>\n                                <div class="total-price">\n                                    <span>${Number(orders[r.id].product.price.slice(0,-4))*orders[r.id].quantity+" грн"}</span> \n                                </div>\n                            </div>\n                        `,addedProductsList.appendChild(e)}minusQuantity=document.querySelectorAll(".minus-quantity"),document.querySelectorAll(".plus-quantity").forEach((function(t){t.addEventListener("click",(function(t){let r=this.dataset.value;const n=e.find((e=>e.id===r));if(orders[n.id]){orders[n.id].quantity=orders[n.id].quantity+1;const e=addedProductsList.querySelector('[data-value="'+n.id+'"] .total-price span'),t=addedProductsList.querySelector('[data-value="'+n.id+'"] .quantity-number');orders[n.id].totalPrice=Number(orders[n.id].product.price.slice(0,-4))*orders[n.id].quantity,e.innerText=orders[n.id].totalPrice+" грн",t.innerText=orders[n.id].quantity,orders.orderSum+=Number(orders[n.id].product.price.slice(0,-4))}orderDetailSum.innerText=orders.orderSum}))})),minusQuantity.forEach((function(t){t.addEventListener("click",(function(t){let r=this.dataset.value;const n=e.find((e=>e.id===r));if(orders[n.id]&&1!=orders[n.id].quantity){orders[n.id].quantity=orders[n.id].quantity-1;const e=addedProductsList.querySelector('[data-value="'+n.id+'"] .total-price span'),t=addedProductsList.querySelector('[data-value="'+n.id+'"] .quantity-number');orders[n.id].totalPrice=Number(orders[n.id].product.price.slice(0,-4))*orders[n.id].quantity,e.innerText=orders[n.id].totalPrice+" грн",t.innerText=orders[n.id].quantity,orders.orderSum-=Number(orders[n.id].product.price.slice(0,-4))}orderDetailSum.innerText=orders.orderSum}))})),orderDetailSum.innerText=orders.orderSum}))}(e)}))}))}}
