document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".burger"),t=document.querySelector(".top-nav");e.addEventListener("click",(function(){this.classList.toggle("active"),t.classList.toggle("activemobile")}));const r=document.querySelector(".mobile-filter"),n=document.querySelector(".filter"),d=document.querySelector(".cancel-filter");document.querySelector(".active-filter");r.addEventListener("click",(function(e){e.preventDefault(),n.classList.add("active-filter")})),d.addEventListener("click",(function(){n.classList.remove("active-filter")})),orders.orderSum=0;const c=document.querySelector(".card-bott"),i=(document.querySelector(".filter-season"),12);function a(e){const t=(e-1)*i,r=t+i,n=jsonData.slice(t,r);var d;d=n,c.innerHTML="",d.forEach((e=>{const t=document.createElement("figure"),r=document.createElement("figcaption");t.classList.add("card-box"),t.appendChild(r);const n=document.createElement("img");n.src=e.img,n.alt=e.alt,r.appendChild(n);const d=document.createElement("h2");d.classList.add("header-card"),d.innerText=e.head,r.appendChild(d);const i=document.createElement("p");i.classList.add("old-price"),i.innerText=e.saleprice,r.appendChild(i);const a=document.createElement("p");a.classList.add("new-price"),a.innerText=e.price,r.appendChild(a);const o=document.createElement("div");o.classList.add("input-block"),r.appendChild(o);const s=["40","41","42","43","44","45"];for(const t of s){const r=document.createElement("input");r.type="checkbox",r.id=`input-${e.id}-${t}`,r.value=t;const n=document.createElement("label");n.classList.add(`label${t}`),n.setAttribute("for",`input-${e.id}-${t}`),n.innerText=`${t}`,o.appendChild(r),o.appendChild(n)}const l=document.createElement("a");l.classList.add("cta-card"),l.setAttribute("data-value",e.id),l.innerText=e.cta,l.href=e.href,r.appendChild(l),c.appendChild(t)}))}function o(e,t,r){var n=document.createElement("button");return n.innerText=e,n.className=t,n.onclick=r,n}function s(){for(var e=document.getElementById("pagination").getElementsByTagName("button"),t=0;t<e.length;t++){parseInt(e[t].innerText)===currentPage?(e[t].classList.add("current-page"),e[t].disabled=!0):(e[t].classList.remove("current-page"),e[t].disabled=!1)}}currentPage=1,totalPages=1,jsonData=[],fetch("products.json").then((e=>e.json())).then((e=>{jsonData=e,totalPages=Math.ceil(jsonData.length/i),a(currentPage),function(){var e=document.querySelector("#pagination");e.innerHTML="",e.appendChild(o("←","arrow-pag prev",(function(){currentPage>1&&(currentPage--,a(currentPage),s())})));var t=4,r=Math.floor(t/2),n=Math.max(1,currentPage-r),d=Math.min(totalPages,n+t-1);n>1&&(e.appendChild(o(1,"",(function(){currentPage=1,a(currentPage),s()}))),n>2&&e.appendChild(o("...","ellipsis",(function(){}))));for(var c=n;c<=d;c++)e.appendChild(o(c,c===currentPage?"active":"",(function(){currentPage=parseInt(this.innerText),a(currentPage),s()})));d<totalPages&&(d<totalPages-1&&e.appendChild(o("...","ellipsis",(function(){}))),e.appendChild(o(totalPages,"",(function(){currentPage=totalPages,a(currentPage),s()})))),e.appendChild(o("→","arrow-pag next",(function(){currentPage<totalPages&&(currentPage++,a(currentPage),s())}))),s()}()})).catch((e=>console.error("Помилка завантаження даних:",e)));const l=document.querySelectorAll(".slider-images img"),u=document.querySelector(".arr-left"),p=document.querySelector(".arr-right"),m=document.querySelectorAll(".slide-description");let v=0;function f(){m[v].classList.remove("active"),l[v].classList.remove("active"),v=(v+1)%l.length,l[v].classList.add("active"),m[v].classList.add("active")}f();const h=setInterval(f,5e3);u.addEventListener("click",(function(){clearInterval(h),f()})),p.addEventListener("click",(function(){clearInterval(h),f()}));const g=document.querySelector(".cart"),y=document.querySelector(".basket-popup"),q=document.querySelector(".basket-back"),S=document.querySelector(".added-products-list"),L=document.querySelector("body");function b(){y.classList.toggle("d-block"),L.classList.toggle("hidden")}S.style.height=window.innerHeight-300+"px",g.addEventListener("click",b),q.addEventListener("click",b);const P=document.querySelectorAll(".range-input input"),E=document.querySelectorAll(".price-input input"),x=document.querySelector(".slider .progress");let T=1e3;E.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(E[0].value),r=parseInt(E[1].value);r-t>=T&&r<=P[1].max&&("input-min"===e.target.className?(P[0].value=t,x.style.left=t/P[0].max*100+"%"):(P[1].value=r,x.style.right=100-r/P[1].max*100+"%"))}))})),P.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(P[0].value),r=parseInt(P[1].value);r-t<T?"range-min"===e.target.className?P[0].value=r-T:P[1].value=t+T:(E[0].value=t,E[1].value=r,x.style.left=t/P[0].max*100+"%",x.style.right=100-r/P[1].max*100+"%")}))}));let k=document.querySelector(".img-carousel"),C=document.querySelectorAll(".step-block");const $=document.querySelectorAll(".img-carousel img");console.log(k),function(){let e=0;C.forEach((function(t){e+=t.getBoundingClientRect().height,console.log(e)})),$.forEach((function(t){t.style.height=e+40+"px"}))}();let A=0;setInterval((function(){$[A].classList.remove("active"),A=(A+1)%$.length,$[A].classList.add("active")}),5e3)}));let orderDetailSum=document.querySelector(".order-total-price"),numberOfProductsDOM=document.querySelector(".calc-added-products"),caclnumberOfProducts=0,addedProductsList=document.querySelector(".added-products-list "),orders={};const cartWaitTimeout=setTimeout((function(){cart()}),1e3);function cart(){let e="";if(document.querySelectorAll(".cta-card")){clearInterval(cartWaitTimeout);document.querySelectorAll(".cta-card");document.querySelectorAll(".cta-card").forEach((t=>{t.addEventListener("click",(function(r){r.preventDefault();const n=this.getAttribute("data-value"),d=[];document.querySelectorAll(`input[type="checkbox"][id^="input-${n}"]:checked`).forEach((e=>{d.push(e.value)})),console.log("Вибрані розміри для продукту з ID",n,":",d),function(t,r){let n=t.dataset.value;fetch("products.json").then((e=>e.json())).then((t=>{caclnumberOfProducts++;const d=t.find((e=>e.id===n));if(numberOfProductsDOM.innerText=caclnumberOfProducts,orders[d.id]){orders[d.id].quantity++,orders.orderSum+=Number(orders[d.id].product.price.slice(0,-4));const e=addedProductsList.querySelector('[data-value="'+d.id+'"] .total-price span'),t=addedProductsList.querySelector('[data-value="'+d.id+'"] .quantity-number');orders[d.id].totalPrice=Number(orders[d.id].product.price.slice(0,-4))*orders[d.id].quantity,e.innerText=orders[d.id].totalPrice+" грн",t.innerText=orders[d.id].quantity}else{if(orders[d.id]={product:d,quantity:0},r)if(1===r.length)e=e+""+r,orders[d.id].quantity+=1;else{orders[d.id].quantity+=r.length;for(let t=0;t<r.length;t++)e=0===t?""+r[t]:e+", "+r[t]}orders.orderSum+=Number(orders[d.id].product.price.slice(0,-4))}var c;c=n,fetch("products.json").then((e=>e.json())).then((t=>{const r=t.find((e=>e.id===c)),n=document.createElement("div");n.innerHTML=`\n                                    <div class="basket-card flex items-center" data-value=${r.id}>\n                                        <div class="basket-product-description flex items-center">\n                                            <img src=${r.img}>\n                                            <div class="description">\n                                                <h3>${r.head}</h3>\n                                                <table>\n                                                    <tr>\n                                                        <td>колір</td>\n                                                        <td></td>\n                                                    </tr>\n                                                    <tr>\n                                                        <td>розмір</td>\n                                                        <td>${e}</td>\n                                                    </tr>\n                                                    <tr>\n                                                        <td>ціна</td>\n                                                        <td>${r.price} <span>${r.saleprice}</span></td>\n                                                    </tr>\n                                                    <tr>\n                                                        <td>кількість</td>\n                                                        <td><div class="quantity flex">\n                                                            <div class="minus-quantity" data-value="${r.id}">-</div>\n                \n                                                            <div class="quantity-number">${orders[r.id].quantity}</div>\n                \n                                                            <div class="plus-quantity" data-value="${r.id}">+</div>\n                                                        </div></td>\n                                                    </tr>\n                                                </table>\n                                                <div class="delete-product">видалити товар</div>\n                                            </div>\n                                        </div>\n                                        <div class="total-price">\n                                            <span>${Number(orders[r.id].product.price.slice(0,-4))*orders[r.id].quantity+" грн"}</span> \n                                        </div>\n                                    </div>\n                                `,addedProductsList.appendChild(n),fetch("products.json").then((e=>e.json())).then((e=>{let t=document.querySelectorAll(".plus-quantity");t.forEach((function(){console.log("очищення")})),t.forEach((function(t){t.addEventListener("click",(function(t){let r=this.dataset.value;const n=e.find((e=>e.id===r));if(orders[n.id]){orders[n.id].quantity=orders[n.id].quantity+1;const e=addedProductsList.querySelector('[data-value="'+n.id+'"] .total-price span'),t=addedProductsList.querySelector('[data-value="'+n.id+'"] .quantity-number');orders[n.id].totalPrice=Number(orders[n.id].product.price.slice(0,-4))*orders[n.id].quantity,e.innerText=orders[n.id].totalPrice+" грн",t.innerText=orders[n.id].quantity,orders.orderSum+=Number(orders[n.id].product.price.slice(0,-4))}orderDetailSum.innerText=orders.orderSum}))}))})),fetch("products.json").then((e=>e.json())).then((e=>{let t=document.querySelectorAll(".minus-quantity");t.forEach((function(){console.log("очищення")})),t.forEach((function(t){t.addEventListener("click",(function(t){let r=this.dataset.value;const n=e.find((e=>e.id===r));if(orders[n.id]&&1!=orders[n.id].quantity){orders[n.id].quantity=orders[n.id].quantity-1;const e=addedProductsList.querySelector('[data-value="'+n.id+'"] .total-price span'),t=addedProductsList.querySelector('[data-value="'+n.id+'"] .quantity-number');orders[n.id].totalPrice=Number(orders[n.id].product.price.slice(0,-4))*orders[n.id].quantity,e.innerText=orders[n.id].totalPrice+" грн",t.innerText=orders[n.id].quantity,orders.orderSum-=Number(orders[n.id].product.price.slice(0,-4))}orderDetailSum.innerText=orders.orderSum}))}))}))})),orderDetailSum.innerText=orders.orderSum}))}(t,d)}))}))}}
