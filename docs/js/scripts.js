document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector(".calc-added-products"),t=0,n=document.querySelector(".added-products-list "),c={},i=document.querySelectorAll(".minus-quantity"),a=document.querySelectorAll(".plus-quantity");const r=document.querySelector(".card-bott"),d=(document.querySelector(".filter-season"),1);function l(e){const t=(e-1)*d,n=t+d,c=jsonData.slice(t,n);var i;i=c,r.innerHTML="",i.forEach((e=>{const t=document.createElement("figure"),n=document.createElement("figcaption");t.classList.add("card-box"),t.appendChild(n);const c=document.createElement("img");c.src=e.img,c.alt=e.alt,n.appendChild(c);const i=document.createElement("h2");i.classList.add("header-card"),i.innerText=e.head,n.appendChild(i);const a=document.createElement("p");a.classList.add("old-price"),a.innerText=e.saleprice,n.appendChild(a);const d=document.createElement("p");d.classList.add("new-price"),d.innerText=e.price,n.appendChild(d);const l=document.createElement("div");l.classList.add("input-block"),n.appendChild(l);const o=["40","41","42","43","44","45"];for(const t of o){const n=document.createElement("input");n.type="checkbox",n.id=`input-${e.id}-${t}`,n.value=t;const c=document.createElement("label");c.classList.add(`label${t}`),c.setAttribute("for",`input-${e.id}-${t}`),c.innerText=`${t}`,l.appendChild(n),l.appendChild(c)}const u=document.createElement("a");u.classList.add("cta-card"),u.setAttribute("data-value",e.id),u.innerText=e.cta,u.href=e.href,n.appendChild(u),r.appendChild(t)})),buyBtns=document.querySelectorAll(".cta-card"),buyBtns.forEach((function(e){A(e)})),console.log(buyBtns)}function o(){for(var e=document.getElementById("pagination").getElementsByTagName("button"),t=0;t<e.length;t++){parseInt(e[t].innerText)===currentPage?e[t].disabled=!0:e[t].disabled=!1}}currentPage=1,totalPages=1,jsonData=[],fetch("products.json").then((e=>e.json())).then((e=>{jsonData=e,totalPages=Math.ceil(jsonData.length/d),l(currentPage),function(){var e=document.getElementById("pagination");e.innerHTML="";var t=document.createElement("button");t.innerText="←",t.onclick=function(){currentPage>1&&(currentPage--,l(currentPage),o())},e.appendChild(t);for(var n=1;n<=totalPages;n++){var c=document.createElement("button");c.innerText=n,c.onclick=function(){currentPage=parseInt(this.innerText),l(currentPage),o()},e.appendChild(c)}var i=document.createElement("button");i.innerText="→",i.onclick=function(){currentPage<totalPages&&(currentPage++,l(currentPage),o())},e.appendChild(i),o()}(),document.querySelectorAll(".cta-card").forEach((function(e){A(e)}))})).catch((e=>console.error("Помилка завантаження даних:",e)));const u=document.querySelector(".header-carousel"),s=document.querySelector(".winter"),p=document.querySelector(".summer"),m=document.querySelector(".arr-left"),y=document.querySelector(".arr-right");let g,h=0;function v(){0===h||100===h?(u.style.backgroundImage="url(../img/header-bg-1.jpg)",q(p,0,"none","0"),q(s,1,"inline","1")):50===h&&(u.style.backgroundImage="url(../img/header-background-2.jpg)",q(s,0,"none","0"),q(p,1,"inline","1")),h=(h+1)%101}function q(e,t,n,c){e.style.opacity=t,e.style.display=n;let i=setInterval((()=>{e.style.opacity=c,clearInterval(i)}),0)}function f(){v(),g=setInterval(v,100)}f(),m.addEventListener("click",E),y.addEventListener("click",E);let b=!0;function E(){if(b){b=!1,clearInterval(g),"1"==s.style.opacity?(u.style.backgroundImage="url(../img/header-background-2.jpg)",q(s,0,"none","0"),q(p,1,"inline","1")):(console.log(2),u.style.backgroundImage="url(../img/header-bg-1.jpg)",q(p,0,"none","0"),q(s,1,"inline","1"));let e=setInterval((()=>{b=!0,clearInterval(e)}),1e3);f()}}const S=document.querySelector(".cart"),x=document.querySelector(".basket-popup"),k=document.querySelector(".basket-back"),L=document.querySelector(".added-products-list"),P=document.querySelector("body");function T(){x.classList.toggle("d-block"),P.classList.toggle("hidden")}L.style.height=window.innerHeight-300+"px",S.addEventListener("click",T),k.addEventListener("click",T);const I=document.querySelectorAll(".range-input input"),j=document.querySelectorAll(".price-input input"),C=document.querySelector(".slider .progress");let $=1e3;function A(r){r.addEventListener("click",(function(r){let d=this.dataset.value;fetch("products.json").then((e=>e.json())).then((r=>{t++;const l=r.find((e=>e.id===d));if(e.innerText=t,c[l.id]){c[l.id].quantity++;const e=n.querySelector("."+l.id+" .total-price span"),t=n.querySelector("."+l.id+" .quantity-number");console.log(t),c[l.id].totalPrice=Number(c[l.id].product.price.slice(0,-4))*c[l.id].quantity,e.innerText=c[l.id].totalPrice+" грн",t.innerText=c[l.id].quantity}else{c[l.id]={product:l,quantity:1};const e=document.createElement("div");e.innerHTML=`\n                            <div class="basket-card flex items-center ${l.id}">\n                                <div class="basket-product-description flex items-center">\n                                    <img src=${l.img}>\n                                    <div class="description">\n                                        <h3>${l.head}</h3>\n                                        <table>\n                                            <tr>\n                                                <td>колір</td>\n                                                <td></td>\n                                            </tr>\n                                            <tr>\n                                                <td>розмір</td>\n                                                <td></td>\n                                            </tr>\n                                            <tr>\n                                                <td>ціна</td>\n                                                <td>${l.price} <span>${l.saleprice}</span></td>\n                                            </tr>\n                                            <tr>\n                                                <td>кількість</td>\n                                                <td><div class="quantity flex">\n                                                    <div class="minus-quantity" data-value="${l.id}">-</div>\n\n                                                    <div class="quantity-number">${c[l.id].quantity}</div>\n\n                                                    <div class="plus-quantity" data-value="${l.id}">+</div>\n                                                </div></td>\n                                            </tr>\n                                        </table>\n                                        <div class="delete-product">видалити товар</div>\n                                    </div>\n                                </div>\n                                <div class="total-price">\n                                    <span>${Number(c[l.id].product.price.slice(0,-4))*c[l.id].quantity+" грн"}</span> \n                                </div>\n                            </div>\n                        `,n.appendChild(e)}console.log(c),i=document.querySelectorAll(".minus-quantity"),a=document.querySelectorAll(".plus-quantity"),a.forEach((function(e){e.addEventListener("click",(function(e){let t=this.dataset.value;fetch("products.json").then((e=>e.json())).then((e=>{const i=e.find((e=>e.id===t));if(c[i.id]){c[i.id].quantity=c[i.id].quantity+1;const e=n.querySelector("."+i.id+" .total-price span"),t=n.querySelector("."+i.id+" .quantity-number");console.log(t),c[i.id].totalPrice=Number(c[i.id].product.price.slice(0,-4))*c[i.id].quantity,e.innerText=c[i.id].totalPrice+" грн",t.innerText=c[i.id].quantity,console.log(c)}}))}))})),i.forEach((function(e){e.addEventListener("click",(function(e){let t=this.dataset.value;fetch("products.json").then((e=>e.json())).then((e=>{const i=e.find((e=>e.id===t));if(c[i.id]&&1!=c[i.id].quantity){c[i.id].quantity=c[i.id].quantity-1;const e=n.querySelector("."+i.id+" .total-price span"),t=n.querySelector("."+i.id+" .quantity-number");console.log(t),c[i.id].totalPrice=Number(c[i.id].product.price.slice(0,-4))*c[i.id].quantity,e.innerText=c[i.id].totalPrice+" грн",t.innerText=c[i.id].quantity,console.log(c)}}))}))}))}))}))}j.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(j[0].value),n=parseInt(j[1].value);n-t>=$&&n<=I[1].max&&("input-min"===e.target.className?(I[0].value=t,C.style.left=t/I[0].max*100+"%"):(I[1].value=n,C.style.right=100-n/I[1].max*100+"%"))}))})),I.forEach((e=>{e.addEventListener("input",(e=>{let t=parseInt(I[0].value),n=parseInt(I[1].value);n-t<$?"range-min"===e.target.className?I[0].value=n-$:I[1].value=t+$:(j[0].value=t,j[1].value=n,C.style.left=t/I[0].max*100+"%",C.style.right=100-n/I[1].max*100+"%")}))}))}));
