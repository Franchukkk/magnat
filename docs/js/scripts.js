<<<<<<< HEAD
const reviewsArr=[{name:"Шамрай Артем1",date:"30.12.2023",rate:"1",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем2",date:"30.12.2023",rate:"2",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем3",date:"30.12.2023",rate:"3",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем4",date:"30.12.2023",rate:"4",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем5",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем6",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем7",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем8",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем9",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем10",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем11",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем12",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем13",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем14",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем15",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем16",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем17",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем18",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем19",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем20",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем21",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."},{name:"Шамрай Артем22",date:"30.12.2023",rate:"5",review:"В принципі за свої гроші доволі не поганий товар. Виглядають надійно як і по матеріалах так і як виконанні.Як будуть носитися ще подивимося, поки в місті майже 10 як для зими.З нюансів це вага. Трохи не дуже сучасно зараз але вибирав за ціною."}];function displayReviews(e,t,a){const r=document.querySelector(`.${t}`),n=Math.min(reviewsArr.length,e);for(let e=reviewsArr.length-1-a;e>=reviewsArr.length-n-a;e--){if(!reviewsArr[e]){document.getElementById("moreReviewsBtn").classList.add("d-none");break}let t=reviewsArr[e].name,a=reviewsArr[e].date,n=reviewsArr[e].review,i=reviewsArr[e].rate,s="";for(let e=1;e<=5;e++)e<=parseFloat(i)?s+="<div class='star active'></div>":s+="<div class='star'></div>";let d=`\n            <div class="review-card">\n                <div class="review-block-hidden">\n                    <div class="flex-between items-center">\n                        <span>${t}</span>\n                        <span class="date">${a}</span>\n                    </div>\n                    <div class="stars flex">\n                        ${s}\n                    </div>\n                    <p>${n}</p>\n                </div>\n            </div>\n        `;r.insertAdjacentHTML("beforeend",d)}}document.addEventListener("DOMContentLoaded",(function(){let e=0;displayReviews(5,"reviews-list",0),displayReviews(10,"reviews-popup-list",0);const t=document.querySelectorAll(".star-review"),a=document.getElementById("userRate"),r=document.getElementById("moreReviewsBtn");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(function(){n(this.getAttribute("data-value"))}));function n(e){e=parseInt(e);for(let a=0;a<t.length;a++)a<e?t[a].classList.add("active"):t[a].classList.remove("active");a.value=e}r.addEventListener("click",(function(){e+=10,displayReviews(10,"reviews-popup-list",e)}))}));
function updateCartBtns(){console.log(document.querySelectorAll(".cta-card")),document.querySelector(".same-card").innerHTML="",document.querySelectorAll(".cta-card").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const r=this.getAttribute("data-value"),o=[];document.querySelectorAll(`input[type="checkbox"][id^="input-${r}"]:checked`).forEach((e=>{o.push(e.value)})),buyBtnFunc(e,o)}))}))}document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".burger"),t=document.querySelector(".top-nav"),r=document.querySelectorAll(".scrollBurger");e.addEventListener("click",(function(){this.classList.toggle("active"),t.classList.toggle("activemobile")})),window.addEventListener("scroll",(function(){r.forEach((r=>{const o=r.getBoundingClientRect();o.top<=0&&o.bottom>=0&&(e.classList.remove("active"),t.classList.remove("activemobile"))}))}));const o=document.querySelector(".mobile-filter"),n=document.querySelector(".filter"),c=document.querySelector(".cancel-filter");o.addEventListener("click",(function(e){e.preventDefault(),n.classList.add("active-filter")})),c.addEventListener("click",(function(){n.classList.remove("active-filter")}));const a=document.querySelectorAll(".select");a.forEach((e=>{const t=e.querySelector(".select__in"),r=e.querySelectorAll(".select__item"),o=e.querySelector(".select__input"),n=new Event("change");t.addEventListener("click",(()=>{a.forEach((t=>{t!==e&&t.classList.remove("is-opened")})),e.classList.toggle("is-opened")})),r.forEach((c=>{c.addEventListener("click",(()=>{o.value=c.dataset.value,o.dispatchEvent(n),t.innerHTML=c.innerHTML,r.forEach((e=>{e.classList.remove("is-active")})),c.classList.add("is-active"),e.classList.remove("is-opened")}))}))})),document.addEventListener("click",(e=>{e.target.closest(".select")||a.forEach((e=>{e.classList.contains("is-opened")&&e.classList.remove("is-opened")}))})),document.addEventListener("keyup",(e=>{"Escape"==e.key&&a.forEach((e=>{e.classList.contains("is-opened")&&e.classList.remove("is-opened")}))})),orders.orderSumWithNoDiscount=0,orders.orderSumWithDiscount=0,orders.orderSum=0;const i=document.querySelector(".card-bott"),l=document.querySelector(".filter-season"),d=document.querySelector(".popap-card"),s=document.querySelector(".same-card"),u=12;let p,m=1,f=1,y=[];function h(e){const t=(e-1)*u,r=t+u;S(y.slice(t,r),i)}function v(e){const t=document.createElement("figure"),r=document.createElement("figcaption");if(""!==e.saleprice){const t=document.createElement("span"),o=100-100*parseFloat(e.price)/parseFloat(e.saleprice);t.classList.add("card-flag"),t.innerText=`sale -${o.toFixed(0)}%`,r.appendChild(t)}t.classList.add("card-box",e.category,e.seasonFilter,e.color,e.model,e.material,e.style,e.size40,e.size41,e.size42,e.size43,e.size44,e.size45),t.appendChild(r);const o=document.createElement("a");o.classList.add("click-card"),o.href="#",o.setAttribute("data-value",e.id),o.addEventListener("click",(function(t){t.preventDefault(),function(e,t){if(t){p=t;const e=y.find((e=>e.id===t));e&&(!function(){const e=document.querySelector(".choise-size_popap"),t=document.querySelector(".choise-color_popap"),r=document.querySelector(".same-card"),o=document.querySelector(".descript-popap"),n=document.querySelector(".producer-card_popap"),c=document.querySelector(".country-card_popap"),a=document.querySelector(".kind-card_popap"),i=document.querySelector(".season-card_popap"),l=document.querySelector(".material-top_popap"),d=document.querySelector(".material-bottom_popap"),s=document.querySelector(".material-sole_popap"),u=document.querySelector(".style-card_popap");e.innerHTML="",o.innerHTML="",n.innerHTML="",c.innerHTML="",a.innerHTML="",i.innerHTML="",l.innerHTML="",d.innerHTML="",s.innerHTML="",c.innerHTML="",u.innerHTML="";const p=document.querySelector(".color-form-popap");p&&p.parentNode===t&&t.removeChild(p);availableColors=[],r&&(r.innerHTML="")}(),function(e){const t=document.querySelector(".description-card_popap"),r=document.querySelector(".new-price-popap"),o=document.querySelector(".code-card_popap"),n=document.querySelector(".price-popap"),c=document.querySelector(".main-card-img"),a=document.querySelector(".small-img-first"),i=document.querySelector(".small-img-second"),l=document.querySelector(".small-img-last"),u=document.querySelector(".choise-color_popap"),m=document.querySelector(".descript-popap"),f=document.querySelector(".producer-card_popap"),h=document.querySelector(".country-card_popap"),S=document.querySelector(".kind-card_popap"),L=document.querySelector(".season-card_popap"),q=document.querySelector(".material-top_popap"),g=document.querySelector(".material-bottom_popap"),b=document.querySelector(".material-sole_popap"),E=document.querySelector(".style-card_popap");function k(e,t){const r=document.createElement("div"),o=document.createElement("a"),n=document.createElement("img"),c=document.querySelector(".open-img");c&&c.remove(),r.classList.add("open-img"),n.src=e,n.alt=t,o.classList.add("cancel-size-popap"),o.setAttribute("href","#"),o.innerHTML='\n                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none">\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0.267146 0.181446C0.506963 -0.0604821 0.895783 -0.0604821 1.1356 0.181446L5 4.07987L8.8644 0.181446C9.10422 -0.0604821 9.49304 -0.0604821 9.73285 0.181446C9.97267 0.423375 9.97267 0.815619 9.73285 1.05755L5.86845 4.95597L9.82014 8.94245C10.06 9.18438 10.06 9.57662 9.82014 9.81855C9.58032 10.0605 9.1915 10.0605 8.95168 9.81855L5 5.83207L1.04832 9.81855C0.8085 10.0605 0.419679 10.0605 0.179863 9.81855C-0.0599542 9.57662 -0.0599542 9.18438 0.179863 8.94245L4.13155 4.95597L0.267146 1.05755C0.0273296 0.815619 0.0273296 0.423375 0.267146 0.181446Z" fill="#4E98B6"/>\n                </svg>\n            ',I.style.display="block",r.appendChild(n),r.appendChild(o),d.appendChild(r),o.addEventListener("click",(function(){I.style.display="none",r.remove()}))}producerInfo=document.createElement("p"),producerInfo.innerText="виробник",producerInfo2=document.createElement("p"),producerInfo2.classList.add("bold-card"),producerInfo2.innerText=e.producer,f.appendChild(producerInfo),f.appendChild(producerInfo2),countryInfo=document.createElement("p"),countryInfo.innerText="країна виробник",countryInfo2=document.createElement("p"),countryInfo2.innerText=e.country,countryInfo2.classList.add("bold-card"),h.appendChild(countryInfo),h.appendChild(countryInfo2),kindInfo=document.createElement("p"),kindInfo.innerText="вид взуття",kindInfo1=document.createElement("p"),kindInfo1.classList.add("bold-card"),kindInfo1.innerText=e.kind,S.appendChild(kindInfo),S.appendChild(kindInfo1),seasonInfo=document.createElement("p"),seasonInfo.innerText="сезон",seasonInfo1=document.createElement("p"),seasonInfo1.classList.add("bold-card"),seasonInfo1.innerText=e.seasonHaract,L.appendChild(seasonInfo),L.appendChild(seasonInfo1),materialTopInfo=document.createElement("p"),materialTopInfo.innerText="матеріал верху",materialTopInfo1=document.createElement("p"),materialTopInfo1.classList.add("bold-card"),materialTopInfo1.innerText=e.materialTop,q.appendChild(materialTopInfo),q.appendChild(materialTopInfo1),materialBottomInfo=document.createElement("p"),materialBottomInfo.innerText="матеріал підкладки",materialBottomInfo1=document.createElement("p"),materialBottomInfo1.classList.add("bold-card"),materialBottomInfo1.innerText=e.materialBottom,g.appendChild(materialBottomInfo),g.appendChild(materialBottomInfo1),materialSoleInfo=document.createElement("p"),materialSoleInfo.innerText="матеріал підошви",materialSoleInfo1=document.createElement("p"),materialSoleInfo1.classList.add("bold-card"),materialSoleInfo1.innerText=e.materialSole,b.appendChild(materialSoleInfo),b.appendChild(materialSoleInfo1),styleCardInfo=document.createElement("p"),styleCardInfo.innerText="стиль",styleCardInfo1=document.createElement("p"),styleCardInfo1.classList.add("bold-card"),styleCardInfo1.innerText=e.styleCard,E.appendChild(styleCardInfo),E.appendChild(styleCardInfo1),t.innerText=e.head,r.innerText=e.price,o.innerText=e.id,n.innerText=e.saleprice,c.src=e.img,c.alt=e.alt,a.src=e.imgPopap1,a.alt=e.altPopap1,i.src=e.imgPopap2,i.alt=e.altPopap2,l.src=e.imgPopap3,l.alt=e.altPopap3,c.addEventListener("click",(function(){k(c.src,c.alt)}));let T=!1;a.addEventListener("click",(function(){T?(c.src=e.img,c.alt=e.alt,a.src=e.imgPopap1,a.alt=e.altPopap1):(c.src=e.imgPopap1,c.alt=e.altPopap1,a.src=e.img,a.alt=e.alt),i.src=e.imgPopap2,i.alt=e.altPopap2,l.src=e.imgPopap3,l.alt=e.altPopap3,T=!T}));let C=!1;i.addEventListener("click",(function(){C?(c.src=e.img,c.alt=e.alt,i.src=e.imgPopap2,i.alt=e.altPopap2):(c.src=e.imgPopap2,c.alt=e.altPopap2,i.src=e.img,i.alt=e.alt),a.src=e.imgPopap1,a.alt=e.altPopap1,l.src=e.imgPopap3,l.alt=e.altPopap3,C=!C}));let x=!1;l.addEventListener("click",(function(){x?(c.src=e.img,c.alt=e.alt,l.src=e.imgPopap3,l.alt=e.altPopap3,a.src=e.imgPopap1,a.alt=e.altPopap1,i.src=e.imgPopap2,i.alt=e.altPopap2):(c.src=e.imgPopap3,c.alt=e.altPopap3,l.src=e.img,l.alt=e.alt),a.src=e.imgPopap1,a.alt=e.altPopap1,i.src=e.imgPopap2,i.alt=e.altPopap2,x=!x}));const D=document.createElement("ol"),P=document.createElement("p");if(e.bottomDescript){const t=document.createElement("p");t.innerText=e.bottomDescript,m.appendChild(t)}m.appendChild(P),P.innerText=e.descript;const w=[e.list1,e.list2,e.list3,e.list4,e.list5,e.list6].filter(Boolean);for(const e of w){const t=document.createElement("li");t.innerText=e,D.appendChild(t)}m.appendChild(D);const A=["40","41","42","43","44","45"],M=document.querySelector(".choise-size_popap");for(const t of A){const r=document.createElement("input");r.type="checkbox",r.id=`popup-input-${e.id}-${t}`,r.name="size-popap",r.value=t;const o=document.createElement("label");o.classList.add(`label${t}`),o.setAttribute("for",`popup-input-${e.id}-${t}`),o.innerText=`${t}`,r.disabled=!(`size${t}`in e),M.appendChild(r),M.appendChild(o)}const N=document.createElement("form");N.classList.add("color-form-popap"),u.appendChild(N);let $=[e.color,e.color1,e.color2].filter(Boolean);console.log($),$.forEach((function(t){const r=t+"-popap"+e.id,o=document.createElement("input");o.type="radio",o.id=r,o.name="color-popap",o.value=t;const n=document.createElement("label");switch(n.htmlFor=r,t){case"blue":console.log("blue"),n.classList.add("blue");break;case"black":console.log("black"),n.classList.add("black");break;case"green":console.log("green"),n.classList.add("haki");break;case"brown":console.log("brown"),n.classList.add("brown")}N.appendChild(o),N.appendChild(n)}));const B=document.querySelector(".min-count_card"),_=document.querySelector(".max-count_card"),W=document.querySelector(".num-count-card");let O=1;const H=()=>{O<10&&(O++,W.innerText=O)},z=()=>{O>1&&(O--,W.innerText=O)};B.addEventListener("click",z),_.addEventListener("click",H);let F=e.color;const j=4;s.innerHTML="",function(e,t,r,o){let n=0,c=!1;const a=document.querySelector(".text-same-card");e.forEach((e=>{if(n<o&&t&&e.color===t&&p!==e.id){const t=v(e);r.appendChild(t),n++,c=!0}})),c||(a.innerText="Нажаль схожих товарів не знайдено.",r.appendChild(a))}(y,F,s,j);let R=document.querySelector(".cta-popap");R.setAttribute("data-value",e.id),R.addEventListener("click",(function(e){e.preventDefault(),d.style.display="none"})),btnSimilar()}(e),d.style.display="grid")}else console.error("error")}(0,e.id),Z()})),r.appendChild(o);const n=document.createElement("img");n.src=e.img,n.alt=e.alt,n.setAttribute("data-src",e.img),n.setAttribute("data-alt",e.alt),r.appendChild(n);const c=document.createElement("h2");c.classList.add("header-card"),c.innerText=e.head,r.appendChild(c);const a=document.createElement("p");a.classList.add("old-price"),a.innerText=e.saleprice,r.appendChild(a);const i=document.createElement("p"),l=parseInt(e.price.replace(/\D/g,""));t.dataset.price=l,i.classList.add("new-price"),i.innerText=e.price,r.appendChild(i);const u=document.createElement("div");u.classList.add("input-block"),r.appendChild(u);const m=["40","41","42","43","44","45"];for(const t of m){const r=document.createElement("input");r.type="checkbox",r.name="size-radio",r.id=`input-${e.id}-${t}`,r.value=t;const o=document.createElement("label");o.classList.add(`label${t}`),o.setAttribute("for",`input-${e.id}-${t}`),o.innerText=`${t}`,r.disabled=!(`size${t}`in e),u.appendChild(r),u.appendChild(o)}const f=document.createElement("a");return f.classList.add("cta-card"),f.setAttribute("data-value",e.id),f.innerText=e.cta,f.href="#",r.appendChild(f),t}function S(e,t){t.innerHTML="",e.forEach((e=>{const r=v(e);t.appendChild(r)}))}S(y,i);document.querySelector(".back-to-main").addEventListener("click",(function(e){e.preventDefault(),d.style.display="none",document.querySelector(".same-card").innerHTML="",s.innerHTML=""}));const L=document.querySelectorAll(".card-cta-season"),q=document.querySelectorAll(".bottom-cart-season"),g=["winter","summer","demiseason"],b=localStorage.getItem("lastSelectedCategory");function E(e){y.forEach((t=>{S(y,i),setTimeout(updateCartBtns(),0),_();const r=document.querySelector(`.${t.category}`);r&&(r.style.display="#all"===e||e===`#${t.category}`?"block":"none")}))}l.addEventListener("click",(e=>{"BUTTON"===e.target.tagName&&(k=e.target.getAttribute("data-href"),localStorage.setItem("lastSelectedCategory",k),S(y,i),E(k),h(m),setTimeout(updateCartBtns(),0),_())}));let k=b;const T=new URLSearchParams(window.location.search);urlCategory=T.get("category"),urlHash=window.location.hash,selectedHash=urlHash||"#catalog",k=b||"#all",L.forEach((e=>{e.classList.add("card-cta-season"),e.addEventListener("mouseenter",(function(){e.classList.contains("selected")||e.classList.add("hovered")})),e.addEventListener("mouseleave",(function(){e.classList.remove("hovered")}))})),b||(k="#all",localStorage.setItem("lastSelectedCategory",k));const C=document.querySelector(`[data-href="${k}"]`);function E(e){g.forEach((t=>{document.querySelectorAll(`.${t}`).forEach((r=>{r.style.display=e===`${t}`||"#all"===e?"block":"none"}))}))}C&&C.classList.add("selected"),E(k),g.forEach((e=>{document.querySelectorAll(`.${e}`).forEach((t=>{t.style.display=k===`${e}`||"#all"===k?"block":"none"}))})),L.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),L.forEach((e=>{e.classList.remove("selected","hovered")})),e.classList.add("selected");let r=t.target.getAttribute("data-href");if("#all"===r){r="#all",localStorage.setItem("lastSelectedCategory",r);const e=window.location.origin+window.location.pathname+window.location.hash;window.history.replaceState({},"",e)}else{E(r);const e=window.location.origin+window.location.pathname+`?category=${r}#catalog`;window.history.replaceState({},"",e),localStorage.setItem("lastSelectedCategory",r)}S(y,i),E(r),setTimeout(updateCartBtns(),0),_()}))})),q.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let r=t.target.getAttribute("data-href");const o=window.location.origin+window.location.pathname+(r?`?category=${r}`:"")+"#catalog";window.history.replaceState({},"",o),localStorage.setItem("lastSelectedCategory",r);document.getElementById("catalog").scrollIntoView({behavior:"smooth"}),L.forEach((e=>{e.classList.remove("selected","hovered")})),L.forEach((e=>{e.getAttribute("data-href")===r&&e.classList.add("selected","hovered")})),e.classList.add("selected"),S(y,i),E(r),setTimeout(updateCartBtns(),0),_()}))}));document.querySelector(".select__input").addEventListener("change",(function(){!function(e){const t=document.querySelector(".select__input");switch(parseInt(t.value)){case 2:e.sort(((e,t)=>parseFloat(t.price)-parseFloat(e.price)));break;case 3:e.sort(((e,t)=>parseFloat(e.price)-parseFloat(t.price)));break;case 4:e.sort(((e,t)=>new Date(t.date)-new Date(e.date)));break;case 5:e.sort(((e,t)=>t.popularity-e.popularity))}}(y);h(m),w(),M(),updateCartBtns()}));document.querySelectorAll(".readmore").forEach((e=>{e.addEventListener("click",(function(){e.nextElementSibling.classList.toggle("visible"),e.classList.toggle("readmore-active")}))}));const x=document.querySelector(".cta-size-popap"),D=document.querySelector(".cancel-size-popap"),P=document.querySelector(".size-block_popap"),I=document.querySelector(".bg-size-popap");function w(){var e=document.querySelector("#pagination");if(e.innerHTML="",f>1){e.appendChild(A("←","arrow-pag prev",(function(){m>1&&(m--,h(m),w(),M())})));const t=4,r=Math.floor(t/2),o=Math.max(1,m-r),n=Math.min(f,o+t-1);o>1&&(e.appendChild(A(1,"",(function(){m=1,h(m),w(),M()}))),o>2&&e.appendChild(A("...","ellipsis",(function(){}))));for(let t=o;t<=n;t++)!function(t){e.appendChild(A(t,t===m?"active":"",(function(){m=t,h(m),w(),M()})))}(t);n<f&&(n<f-1&&e.appendChild(A("...","ellipsis",(function(){}))),e.appendChild(A(f,"",(function(){m=f,h(m),w(),M()})))),e.appendChild(A("→","arrow-pag next",(function(){m<f&&(m++,h(m),w(),M())})))}}function A(e,t,r){const o=document.createElement("button");return o.innerText=e,o.className=t,o.onclick=r,o}function M(){const e=document.querySelector("#pagination").getElementsByTagName("button");for(var t=0;t<e.length;t++){parseInt(e[t].innerText)===m?(e[t].classList.add("current-page"),e[t].disabled=!0):(e[t].classList.remove("current-page"),e[t].disabled=!1)}}x.addEventListener("click",(function(){P.style.display="block",I.style.display="block",P.classList.add("active-size-popap")})),D.addEventListener("click",(function(){P.style.display="none",I.style.display="none",P.classList.remove("active-size-popap")}));let N=null;function $(e){return Array.from(document.querySelectorAll(`input[name="${e}"]:checked`)).map((e=>e.value))}function B(e,t){return 0===t.length||t.some((t=>e.contains(t)))}function _(){document.querySelectorAll('input[type="checkbox"]').forEach((e=>{e.checked=!1}))}document.querySelectorAll('input[type="checkbox"], input[type="range"]').forEach((e=>{e.addEventListener("click",(function(){N&&(N.remove(),N=null),function(){const e=parseInt(document.querySelector(".input-min").value),t=parseInt(document.querySelector(".input-max").value),r=$("size"),o=$("color"),n=$("model"),c=$("season"),a=$("material"),i=$("style");let l=!1;if(!(g.forEach((d=>{document.querySelectorAll(`.${d}`).forEach((d=>{const s=B(d.classList,r)&&B(d.classList,o)&&B(d.classList,n)&&B(d.classList,c)&&B(d.classList,a)&&B(d.classList,i)&&function(e,t,r){const o=parseInt(e.dataset.price);return o>=t&&o<=r}(d,e,t);d.style.display=s?"grid":"none",s&&(l=!0)}))})),l||N)){const e=document.querySelector(".card-bott");document.querySelector(".card-block");N=document.createElement("div"),N.classList.add("any-block");const t=document.createElement("span");t.classList.add("icon-no-card"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M280-80q-83 0-141.5-58.5T80-280q0-83 58.5-141.5T280-480q83 0 141.5 58.5T480-280q0 83-58.5 141.5T280-80Zm544-40L568-376q-12-13-25.5-26.5T516-428q38-24 61-64t23-88q0-75-52.5-127.5T420-760q-75 0-127.5 52.5T240-580q0 6 .5 11.5T242-557q-18 2-39.5 8T164-535q-2-11-3-22t-1-23q0-109 75.5-184.5T420-840q109 0 184.5 75.5T680-580q0 43-13.5 81.5T629-428l251 252-56 56Zm-615-61 71-71 70 71 29-28-71-71 71-71-28-28-71 71-71-71-28 28 71 71-71 71 28 28Z"/></svg>';const r=document.createElement("p");r.classList.add("no-card"),r.innerText="Нажаль, за вашим вибором не знайдено жодного товару",N.appendChild(t),N.appendChild(r),e.appendChild(N)}}()}))}));const W=document.querySelectorAll(".slider-images img"),O=document.querySelector(".arr-left"),H=document.querySelector(".arr-right"),z=document.querySelectorAll(".slide-description");let F=0;function j(){z[F].classList.remove("active"),W[F].classList.remove("active"),F=(F+1)%W.length,W[F].classList.add("active"),z[F].classList.add("active")}j();let R=setInterval(j,3e3);O.addEventListener("click",(function(){clearInterval(R),z[F].classList.remove("active"),W[F].classList.remove("active"),F=(F-1+W.length)%W.length,W[F].classList.add("active"),z[F].classList.add("active"),R=setInterval(j,3e3)})),H.addEventListener("click",(function(){clearInterval(R),j(),R=setInterval(j,3e3)}));const Z=document.querySelector(".cart"),Q=document.querySelector("#basket-popup-outline"),U=document.querySelector(".basket-back"),J=document.querySelector("body");function V(){Q.classList.toggle("d-block"),J.classList.toggle("hidden")}Z.addEventListener("click",V),U.addEventListener("click",V),fetch("products.json").then((e=>e.json())).then((e=>{y=e,f=Math.ceil(y.length/u),h(m),w(),E(k);const t=document.querySelectorAll(".range-input input"),r=document.querySelectorAll(".price-input input"),o=document.querySelector(".slider .progress"),n=Math.min(...y.map((e=>parseInt(e.price)))),c=Math.max(...y.map((e=>parseInt(e.price))));r.forEach((e=>{r[0].setAttribute("value",n),r[1].setAttribute("value",c),e.addEventListener("input",(e=>{let n=parseInt(r[0].value),c=parseInt(r[1].value);c-n>=10&&c<=t[1].max&&("input-min"===e.target.className?(t[0].value=n,o.style.left=n/t[0].max*100+"%"):(t[1].value=c,o.style.right=100-c/t[1].max*100+"%"))}))})),t.forEach((e=>{t[0].setAttribute("value",n),t[1].setAttribute("value",c),t[0].setAttribute("min",n),t[0].setAttribute("max",c),t[1].setAttribute("min",n),t[1].setAttribute("max",c),e.addEventListener("input",(e=>{let n=parseInt(t[0].value),c=parseInt(t[1].value);c-n<10?"range-min"===e.target.className?t[0].value=c-10:t[1].value=n+10:(r[0].value=n,r[1].value=c,o.style.left=n/t[0].max*100+"%",o.style.right=100-c/t[1].max*100+"%")}))})),document.querySelector('a.bottom-cart-season[data-href="discount"]').addEventListener("click",(function(e){e.preventDefault(),S(y.filter((e=>""!==e.saleprice)),i),setTimeout(updateCartBtns(),0),_()}))})).catch((e=>console.error("Помилка завантаження даних:",e)));let G=document.querySelector(".img-carousel"),K=document.querySelectorAll(".step-block");const X=document.querySelectorAll(".img-carousel img");!function(){let e=0;K.forEach((function(t){e+=t.getBoundingClientRect().height})),window,innerHeight>=960&&(G.style.height=e+40+"px")}();let Y=0;setInterval((function(){X[Y].classList.remove("active"),Y=(Y+1)%X.length,X[Y].classList.add("active")}),3e3)}));let orderDetailSum=document.querySelector(".order-total-price"),orderWithDiscountPrice=document.querySelector(".price-totally b"),orderWithDiscountPriceCalc=0,numberOfProductsDOM=document.querySelector(".calc-added-products"),caclnumberOfProducts=0,addedProductsList=document.querySelector(".added-products-list "),orderDiscount=document.querySelector(".order-discount"),orderDiscountCalc=0;orders={};const cartWaitTimeout=setTimeout((function(){cart()}),1e3);function buyBtnFunc(e,t,r,o){let n=e.dataset.value;fetch("products.json").then((e=>e.json())).then((e=>{const c=e.find((e=>e.id===n));""===c.saleprice&&(c.saleprice=c.price);for(let e=0;e<t.length;e++)if(orders[n+t[e]])if(r)for(let o=r;o>0;o--)console.log(o),document.querySelector(".plus-quantity[data-value='"+n+t[e]+"']").click();else t.length>1?document.querySelector(".plus-quantity[data-value='"+n+t[e]+"']").click():document.querySelector(".plus-quantity[data-value='"+n+t[0]+"']").click();else orders[n+t[e]]={product:c,quantity:r?Number(r):1},t&&(orders[n+t[e]].size=t[e]),orders.orderSumWithNoDiscount+=""!=orders[n+t[e]].product.saleprice?Number(orders[n+t[e]].product.saleprice.slice(0,-4))*orders[n+t[e]].quantity:0,orders.orderSumWithDiscount+=Number(orders[n+t[e]].product.price.slice(0,-4))*orders[n+t[e]].quantity,updateCart(n,orders[n+t[e]].size,o),plusBtn(".plus-quantity[data-value='"+n+t[e]+"']"),minBtn(".minus-quantity[data-value='"+n+t[e]+"']"),r?caclnumberOfProducts+=Number(r):caclnumberOfProducts++,numberOfProductsDOM.innerText=caclnumberOfProducts,orderDiscountCalc+=r?(Number(orders[n+t[e]].product.saleprice.slice(0,-4))-Number(orders[n+t[e]].product.price.slice(0,-4)))*Number(r):(Number(orders[n+t[e]].product.saleprice.slice(0,-4))-Number(orders[n+t[e]].product.price.slice(0,-4)))*orders[n+t[e]].quantity,orderDiscount.innerText=orderDiscountCalc,orderDetailSum.innerText=0!=orders.orderSumWithNoDiscount?orders.orderSumWithNoDiscount:orders.orderSumWithDiscount,orderWithDiscountPrice.innerText=orders.orderSumWithDiscount}))}function updateCart(e,t,r){fetch("products.json").then((e=>e.json())).then((o=>{const n=o.find((t=>t.id===e)),c=r||n.color,a=(n.color,document.createElement("div"));a.innerHTML=`\n            <div class="basket-card flex-between" data-value=${n.id+""+t}>\n                <img src='${n.img}'>\n                \n                <div class="w-100 flex-between items-center">\n                    <div class="description">\n                        <div>\n                            <h3>${n.head}</h3>\n                            <table>\n                                <tr>\n                                    <td>колір</td>\n                                    <td>${c}</td>\n                                </tr>\n                                <tr>\n                                    <td>розмір</td>\n                                    <td class="size-span">${t}</td>\n                                </tr>\n                                <tr>\n                                    <td>ціна</td>\n                                    <td>${n.price} <span>${n.saleprice}</span></td>\n                                </tr>\n                                <tr>\n                                    <td>кількість</td>\n                                    <td>\n                                        <div class="quantity flex">\n                                            <div class="minus-quantity" data-value="${n.id+""+t}">-</div>\n                                            <div class="quantity-number">${orders[n.id+t].quantity}</div>\n                                            <div class="plus-quantity" data-value="${n.id+""+t}">+</div>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                            <div class="delete-product">видалити товар</div>\n                        </div>\n                    </div>\n                    <div class="total-price">\n                        <span>${Number(orders[n.id+t].product.price.slice(0,-4))*orders[n.id+t].quantity+" грн"}</span>\n                    </div>\n                </div>\n            </div>\n        `,addedProductsList.appendChild(a)}))}function cart(){if(document.querySelectorAll(".cta-card")){clearTimeout(cartWaitTimeout);document.querySelectorAll(".cta-card"),document.querySelector("#orderConfirmProductsQuantity");document.querySelectorAll(".cta-card").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const r=this.getAttribute("data-value"),o=[];document.querySelectorAll(`input[type="checkbox"][id^="input-${r}"]:checked`).forEach((e=>{o.push(e.value)})),buyBtnFunc(e,o)}))})),document.querySelectorAll(".cta-popap").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const r=this.getAttribute("data-value"),o=[];let n="";document.querySelectorAll(`.popap-card input[type="checkbox"][id^="popup-input-${r}"]:checked`).forEach((e=>{o.push(e.value)})),document.querySelectorAll('.popap-card input[name="color-popap"]:checked').forEach((e=>{n=e.value}));let c=document.querySelector(".popap-card .quantity-number");console.log(document.querySelectorAll(`choise-size_popap input[type="checkbox"][id^="popup-input-${r}"]:checked`)),console.log(e),console.log(o),console.log(c.innerText),buyBtnFunc(e,o,c.innerText,n)}))}))}}const inputMasks=document.querySelectorAll(".inputMask");function plusBtn(e){fetch("products.json").then((e=>e.json())).then((t=>{document.querySelector(e).addEventListener("click",(function(){let e=this.dataset.value,r=this.dataset.value.slice(0,-2);t.find((e=>e.id===r));const o=e;if(orders[o]){orders[o].quantity+=1;const t=addedProductsList.querySelector('[data-value="'+e+'"] .total-price span'),r=addedProductsList.querySelector('[data-value="'+e+'"] .quantity-number');t.innerText=orders[o].product.price.slice(0,-4)*orders[o].quantity+" грн",r.innerText=orders[o].quantity,orders.orderSumWithNoDiscount+=0!==orders[o].product.saleprice?Number(orders[o].product.saleprice.slice(0,-4)):0,orders.orderSumWithDiscount+=Number(orders[o].product.price.slice(0,-4))}orderDetailSum.innerText=0!=orders.orderSumWithNoDiscount?orders.orderSumWithNoDiscount:orders.orderSumWithDiscount,orderWithDiscountPrice.innerText=orders.orderSumWithDiscount,caclnumberOfProducts++,numberOfProductsDOM.innerText=caclnumberOfProducts,orderDiscountCalc+=Number(orders[r+e.slice(-2)].product.saleprice.slice(0,-4))-Number(orders[r+e.slice(-2)].product.price.slice(0,-4)),orderDiscount.innerText=orderDiscountCalc}))}))}function minBtn(e){fetch("products.json").then((e=>e.json())).then((t=>{document.querySelector(e).addEventListener("click",(function(){let e=this.dataset.value,r=e.slice(0,-2);t.find((e=>e.id===r));const o=e;if(orders[o]&&1!==orders[o].quantity){orders[o].quantity-=1;const t=addedProductsList.querySelector('[data-value="'+o+'"] .total-price span'),n=addedProductsList.querySelector('[data-value="'+o+'"] .quantity-number');orders[o].totalPrice=Number(orders[o].product.price.slice(0,-4))*orders[o].quantity,t.innerText=orders[o].totalPrice+" грн",n.innerText=orders[o].quantity,orders.orderSumWithNoDiscount-=""!=orders[o].product.saleprice?Number(orders[o].product.saleprice.slice(0,-4)):0,orders.orderSumWithDiscount-=Number(orders[o].product.price.slice(0,-4)),1!==n&&caclnumberOfProducts--,numberOfProductsDOM.innerText=caclnumberOfProducts,orderDetailSum.innerText=0!=orders.orderSumWithNoDiscount?orders.orderSumWithNoDiscount:orders.orderSumWithDiscount,orderWithDiscountPrice.innerText=orders.orderSumWithDiscount,orderDiscountCalc-=Number(orders[r+e.slice(-2)].product.saleprice.slice(0,-4))-Number(orders[r+e.slice(-2)].product.price.slice(0,-4)),orderDiscount.innerText=orderDiscountCalc}}))}))}function sendData(e){const t=JSON.stringify(e);document.querySelector("#orderProductsObject").value=t}function btnSimilar(){document.querySelectorAll(".popap-card .cta-card").forEach((function(e){e.addEventListener("click",(function(){let t=this.dataset.value,r=[];document.querySelectorAll(`.popap-card input[type="checkbox"][id^="input-${t}"]:checked`).forEach((e=>{r.push(e.value)})),buyBtnFunc(e,r)}))}))}inputMasks.forEach((function(e){e.value="+38",e.addEventListener("input",(function(){let t=e.value.replace(/[^\d+]/g,"");e.value=t,t.length>13&&(e.value=t.slice(0,13)),t.startsWith("+38")||(e.value="+38"+t.slice(3))}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".cta-card").forEach((function(e){e.addEventListener("click",(function(){document.querySelectorAll(".plus-quantity");plusBtn()}))}))})),document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("click",(function(e){if(e.target.classList.contains("delete-product")){const t=e.target.closest(".basket-card"),r=t.dataset.value;if(orders[r]){orders[r].size;caclnumberOfProducts-=orders[r].quantity,numberOfProductsDOM.innerText=caclnumberOfProducts,orders.orderSumWithNoDiscount-=Number(orders[r].product.saleprice.slice(0,-4))*orders[r].quantity,orderDetailSum.innerText=orders.orderSumWithNoDiscount,orderDiscountCalc-=(Number(orders[r].product.saleprice.slice(0,-4))-Number(orders[r].product.price.slice(0,-4)))*orders[r].quantity,orderDiscount.innerText=orderDiscountCalc,orders.orderSumWithDiscount-=Number(orders[r].product.price.slice(0,-4))*orders[r].quantity,orderWithDiscountPrice.innerText=orders.orderSumWithDiscount,delete orders[r],t.remove()}}}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#openConfirmPopup"),t=document.querySelector("#popup-confirm-outline"),r=document.querySelector(".confirm-back");e.addEventListener("click",(function(){if(Object.keys(orders).length>3){t.classList.toggle("d-block"),sendData(orders);let e=document.querySelector("#confirmPrice"),r=document.querySelector("#confirmTotalPrice");orderConfirmProductsQuantity.innerText=caclnumberOfProducts+" ",r.innerText=orders.orderSumWithDiscount+" грн",e.innerText=orders.orderSumWithNoDiscount+" грн"}})),r.addEventListener("click",(function(){t.classList.toggle("d-block")}))}));const openReviewsPopup=document.querySelector(".allReviewsPopupOpen"),reviewsPopup=document.querySelector(".allReviewsPopup"),reviewsBack=document.querySelector(".reviews-back"),setReview=document.querySelector(".setReview");openReviewsPopup.addEventListener("click",(function(e){e.preventDefault(),reviewsPopup.classList.toggle("d-block")})),setReview.addEventListener("click",(function(e){e.preventDefault(),reviewsPopup.classList.toggle("d-block")})),reviewsBack.addEventListener("click",(function(){reviewsPopup.classList.toggle("d-block")})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".openPayAndDeliveryPopup"),t=document.querySelectorAll(".exchangeAndReturn"),r=document.querySelector("#deliveryPopup"),o=document.querySelector("#exchangePopup");e.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),r.classList.toggle("d-block")}))})),t.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),o.classList.toggle("d-block")}))}));const n=document.querySelector(".privacyPolice"),c=document.querySelector("#privacyPolice"),a=document.querySelector(".back-privacy"),i=document.querySelector("#oferta"),l=document.querySelector(".oferta"),d=document.querySelector(".back-oferta");n.addEventListener("click",(function(e){e.preventDefault(),c.classList.add("d-block")})),a.addEventListener("click",(function(){c.classList.remove("d-block")})),l.addEventListener("click",(function(e){e.preventDefault(),i.classList.add("d-block")})),d.addEventListener("click",(function(){i.classList.remove("d-block")}))}));
=======
function loadReviews(){return fetch("reviews.json").then((e=>{if(!e.ok)throw new Error("reviews error");return e.json()})).catch((e=>(console.error("Error:",e),[])))}function displayReviews(e,t,s,n){const i=document.querySelector(`.${t}`),r=Math.min(n.length,e);for(let e=n.length-1-s;e>=n.length-r-s;e--){if(!n[e]){document.getElementById("moreReviewsBtn").classList.add("d-none");break}let t=n[e].name,s=n[e].date,r=n[e].review,l=n[e].rate,o="";for(let e=1;e<=5;e++)e<=parseFloat(l)?o+="<div class='star active'></div>":o+="<div class='star'></div>";let c=`\n            <div class="review-card">\n                <div class="review-block-hidden">\n                    <div class="flex-between items-center">\n                        <span>${t}</span>\n                        <span class="date">${s}</span>\n                    </div>\n                    <div class="stars flex">\n                        ${o}\n                    </div>\n                    <p>${r}</p>\n                </div>\n            </div>\n        `;i.insertAdjacentHTML("beforeend",c)}const l=document.querySelector(".setReview"),o=document.querySelector(".allReviewsPopupOpen");reviewsBack=document.querySelector(".reviews-back"),l.addEventListener("click",(function(e){e.preventDefault(),document.querySelector(".reviews-popup-list").innerHTML="",document.querySelector(".review-details").style.display="block",document.querySelector(".reviews-popup-list").classList.remove("reviews-popup-list-flex"),document.querySelector(".reviews-and-btn").classList.remove("w-100"),displayReviews(3,"reviews-popup-list",0,n),document.getElementById("moreReviewsBtn").classList.add("d-none"),document.querySelector(".allReviewsPopup").classList.add("d-block")})),o.addEventListener("click",(function(e){e.preventDefault(),document.querySelector(".reviews-popup-list").innerHTML="",document.querySelector(".review-details").style.display="none",document.querySelector(".reviews-popup-list").classList.add("reviews-popup-list-flex"),document.querySelector(".reviews-and-btn").classList.add("w-100"),displayReviews(n.length,"reviews-popup-list",0,n),document.getElementById("moreReviewsBtn").classList.add("d-none"),document.querySelector(".allReviewsPopup").classList.add("d-block")})),reviewsBack.addEventListener("click",(function(){document.querySelector(".allReviewsPopup").classList.remove("d-block")}))}document.addEventListener("DOMContentLoaded",(function(){loadReviews().then((function(e){let t=0;displayReviews(5,"reviews-list",0,e);const s=document.querySelectorAll(".star-review"),n=document.getElementById("userRate"),i=document.getElementById("moreReviewsBtn");for(let e=0;e<s.length;e++)s[e].addEventListener("click",(function(){r(this.getAttribute("data-value"))}));function r(e){e=parseInt(e);for(let t=0;t<s.length;t++)t<e?s[t].classList.add("active"):s[t].classList.remove("active");n.value=e}i.addEventListener("click",(function(){t+=10,displayReviews(10,"reviews-popup-list",t,e)}))}))}));
function updateCartBtns(){console.log(document.querySelectorAll(".cta-card")),document.querySelector(".same-card").innerHTML="",document.querySelectorAll(".cta-card").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const o=this.getAttribute("data-value"),r=[];document.querySelectorAll(`input[type="checkbox"][id^="input-${o}"]:checked`).forEach((e=>{r.push(e.value)})),buyBtnFunc(e,r)}))}))}document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".burger"),t=document.querySelector(".top-nav");e.addEventListener("click",(function(){this.classList.toggle("active"),t.classList.toggle("activemobile")}));const o=document.querySelector(".mobile-filter"),r=document.querySelector(".filter"),n=document.querySelector(".cancel-filter");o.addEventListener("click",(function(e){e.preventDefault(),r.classList.add("active-filter")})),n.addEventListener("click",(function(){r.classList.remove("active-filter")}));const c=document.querySelectorAll(".select");c.forEach((e=>{const t=e.querySelector(".select__in"),o=e.querySelectorAll(".select__item"),r=e.querySelector(".select__input"),n=new Event("change");t.addEventListener("click",(()=>{c.forEach((t=>{t!==e&&t.classList.remove("is-opened")})),e.classList.toggle("is-opened")})),o.forEach((c=>{c.addEventListener("click",(()=>{r.value=c.dataset.value,r.dispatchEvent(n),t.innerHTML=c.innerHTML,o.forEach((e=>{e.classList.remove("is-active")})),c.classList.add("is-active"),e.classList.remove("is-opened")}))}))})),document.addEventListener("click",(e=>{e.target.closest(".select")||c.forEach((e=>{e.classList.contains("is-opened")&&e.classList.remove("is-opened")}))})),document.addEventListener("keyup",(e=>{"Escape"==e.key&&c.forEach((e=>{e.classList.contains("is-opened")&&e.classList.remove("is-opened")}))})),orders.orderSumWithNoDiscount=0,orders.orderSumWithDiscount=0,orders.orderSum=0;const a=document.querySelector(".card-bott"),i=document.querySelector(".filter-season"),l=document.querySelector(".popap-card"),s=document.querySelector(".same-card"),d=12;let u,p=1,m=1,f=[];function y(e){const t=(e-1)*d,o=t+d;v(f.slice(t,o),a)}function h(e){const t=document.createElement("figure"),o=document.createElement("figcaption");if(""!==e.saleprice){const t=document.createElement("span"),r=100-100*parseFloat(e.price)/parseFloat(e.saleprice);t.classList.add("card-flag"),t.innerText=`sale -${r.toFixed(0)}%`,o.appendChild(t)}t.classList.add("card-box",e.category,e.seasonFilter,e.color,e.model,e.material,e.style,e.size40,e.size41,e.size42,e.size43,e.size44,e.size45),t.appendChild(o);const r=document.createElement("a");r.classList.add("click-card"),r.href="#",r.setAttribute("data-value",e.id),r.addEventListener("click",(function(t){t.preventDefault(),function(e,t){if(t){u=t;const e=f.find((e=>e.id===t));e&&(!function(){const e=document.querySelector(".choise-size_popap"),t=document.querySelector(".choise-color_popap"),o=document.querySelector(".same-card"),r=document.querySelector(".descript-popap"),n=document.querySelector(".producer-card_popap"),c=document.querySelector(".country-card_popap"),a=document.querySelector(".kind-card_popap"),i=document.querySelector(".season-card_popap"),l=document.querySelector(".material-top_popap"),s=document.querySelector(".material-bottom_popap"),d=document.querySelector(".material-sole_popap"),u=document.querySelector(".style-card_popap");e.innerHTML="",r.innerHTML="",n.innerHTML="",c.innerHTML="",a.innerHTML="",i.innerHTML="",l.innerHTML="",s.innerHTML="",d.innerHTML="",c.innerHTML="",u.innerHTML="";const p=document.querySelector(".color-form-popap");p&&p.parentNode===t&&t.removeChild(p);availableColors=[],o&&(o.innerHTML="")}(),function(e){const t=document.querySelector(".description-card_popap"),o=document.querySelector(".new-price-popap"),r=document.querySelector(".code-card_popap"),n=document.querySelector(".price-popap"),c=document.querySelector(".main-card-img"),a=document.querySelector(".small-img-first"),i=document.querySelector(".small-img-second"),d=document.querySelector(".small-img-last"),p=document.querySelector(".choise-color_popap"),m=document.querySelector(".descript-popap"),y=document.querySelector(".producer-card_popap"),v=document.querySelector(".country-card_popap"),S=document.querySelector(".kind-card_popap"),g=document.querySelector(".season-card_popap"),q=document.querySelector(".material-top_popap"),L=document.querySelector(".material-bottom_popap"),b=document.querySelector(".material-sole_popap"),E=document.querySelector(".style-card_popap");function T(e,t){const o=document.createElement("div"),r=document.createElement("a"),n=document.createElement("img"),c=document.querySelector(".open-img");c&&c.remove(),o.classList.add("open-img"),n.src=e,n.alt=t,r.classList.add("cancel-size-popap"),r.setAttribute("href","#"),r.innerHTML='\n                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none">\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0.267146 0.181446C0.506963 -0.0604821 0.895783 -0.0604821 1.1356 0.181446L5 4.07987L8.8644 0.181446C9.10422 -0.0604821 9.49304 -0.0604821 9.73285 0.181446C9.97267 0.423375 9.97267 0.815619 9.73285 1.05755L5.86845 4.95597L9.82014 8.94245C10.06 9.18438 10.06 9.57662 9.82014 9.81855C9.58032 10.0605 9.1915 10.0605 8.95168 9.81855L5 5.83207L1.04832 9.81855C0.8085 10.0605 0.419679 10.0605 0.179863 9.81855C-0.0599542 9.57662 -0.0599542 9.18438 0.179863 8.94245L4.13155 4.95597L0.267146 1.05755C0.0273296 0.815619 0.0273296 0.423375 0.267146 0.181446Z" fill="#4E98B6"/>\n                </svg>\n            ',D.style.display="block",o.appendChild(n),o.appendChild(r),l.appendChild(o),r.addEventListener("click",(function(){D.style.display="none",o.remove()}))}producerInfo=document.createElement("p"),producerInfo.innerText="виробник",producerInfo2=document.createElement("p"),producerInfo2.classList.add("bold-card"),producerInfo2.innerText=e.producer,y.appendChild(producerInfo),y.appendChild(producerInfo2),countryInfo=document.createElement("p"),countryInfo.innerText="країна виробник",countryInfo2=document.createElement("p"),countryInfo2.innerText=e.country,countryInfo2.classList.add("bold-card"),v.appendChild(countryInfo),v.appendChild(countryInfo2),kindInfo=document.createElement("p"),kindInfo.innerText="вид взуття",kindInfo1=document.createElement("p"),kindInfo1.classList.add("bold-card"),kindInfo1.innerText=e.kind,S.appendChild(kindInfo),S.appendChild(kindInfo1),seasonInfo=document.createElement("p"),seasonInfo.innerText="сезон",seasonInfo1=document.createElement("p"),seasonInfo1.classList.add("bold-card"),seasonInfo1.innerText=e.seasonHaract,g.appendChild(seasonInfo),g.appendChild(seasonInfo1),materialTopInfo=document.createElement("p"),materialTopInfo.innerText="матеріал верху",materialTopInfo1=document.createElement("p"),materialTopInfo1.classList.add("bold-card"),materialTopInfo1.innerText=e.materialTop,q.appendChild(materialTopInfo),q.appendChild(materialTopInfo1),materialBottomInfo=document.createElement("p"),materialBottomInfo.innerText="матеріал підкладки",materialBottomInfo1=document.createElement("p"),materialBottomInfo1.classList.add("bold-card"),materialBottomInfo1.innerText=e.materialBottom,L.appendChild(materialBottomInfo),L.appendChild(materialBottomInfo1),materialSoleInfo=document.createElement("p"),materialSoleInfo.innerText="матеріал підошви",materialSoleInfo1=document.createElement("p"),materialSoleInfo1.classList.add("bold-card"),materialSoleInfo1.innerText=e.materialSole,b.appendChild(materialSoleInfo),b.appendChild(materialSoleInfo1),styleCardInfo=document.createElement("p"),styleCardInfo.innerText="стиль",styleCardInfo1=document.createElement("p"),styleCardInfo1.classList.add("bold-card"),styleCardInfo1.innerText=e.styleCard,E.appendChild(styleCardInfo),E.appendChild(styleCardInfo1),t.innerText=e.head,o.innerText=e.price,r.innerText=e.id,n.innerText=e.saleprice,c.src=e.img,c.alt=e.alt,a.src=e.imgPopap1,a.alt=e.altPopap1,i.src=e.imgPopap2,i.alt=e.altPopap2,d.src=e.imgPopap3,d.alt=e.altPopap3,c.addEventListener("click",(function(){T(c.src,c.alt)}));let k=!1;a.addEventListener("click",(function(){k?(c.src=e.img,c.alt=e.alt,a.src=e.imgPopap1,a.alt=e.altPopap1):(c.src=e.imgPopap1,c.alt=e.altPopap1,a.src=e.img,a.alt=e.alt),i.src=e.imgPopap2,i.alt=e.altPopap2,d.src=e.imgPopap3,d.alt=e.altPopap3,k=!k}));let C=!1;i.addEventListener("click",(function(){C?(c.src=e.img,c.alt=e.alt,i.src=e.imgPopap2,i.alt=e.altPopap2):(c.src=e.imgPopap2,c.alt=e.altPopap2,i.src=e.img,i.alt=e.alt),a.src=e.imgPopap1,a.alt=e.altPopap1,d.src=e.imgPopap3,d.alt=e.altPopap3,C=!C}));let x=!1;d.addEventListener("click",(function(){x?(c.src=e.img,c.alt=e.alt,d.src=e.imgPopap3,d.alt=e.altPopap3,a.src=e.imgPopap1,a.alt=e.altPopap1,i.src=e.imgPopap2,i.alt=e.altPopap2):(c.src=e.imgPopap3,c.alt=e.altPopap3,d.src=e.img,d.alt=e.alt),a.src=e.imgPopap1,a.alt=e.altPopap1,i.src=e.imgPopap2,i.alt=e.altPopap2,x=!x}));const w=document.createElement("ol"),I=document.createElement("p");if(e.bottomDescript){const t=document.createElement("p");t.innerText=e.bottomDescript,m.appendChild(t)}m.appendChild(I),I.innerText=e.descript;const P=[e.list1,e.list2,e.list3,e.list4,e.list5,e.list6].filter(Boolean);for(const e of P){const t=document.createElement("li");t.innerText=e,w.appendChild(t)}m.appendChild(w);const A=["40","41","42","43","44","45"],M=document.querySelector(".choise-size_popap");for(const t of A){const o=document.createElement("input");o.type="checkbox",o.id=`popup-input-${e.id}-${t}`,o.name="size-popap",o.value=t;const r=document.createElement("label");r.classList.add(`label${t}`),r.setAttribute("for",`popup-input-${e.id}-${t}`),r.innerText=`${t}`,o.disabled=!(`size${t}`in e),M.appendChild(o),M.appendChild(r)}const $=document.createElement("form");$.classList.add("color-form-popap"),p.appendChild($);let N=[e.color,e.color1,e.color2].filter(Boolean);console.log(N),N.forEach((function(t){const o=t+"-popap"+e.id,r=document.createElement("input");r.type="radio",r.id=o,r.name="color-popap",r.value=t;const n=document.createElement("label");switch(n.htmlFor=o,t){case"blue":console.log("blue"),n.classList.add("blue");break;case"black":console.log("black"),n.classList.add("black");break;case"green":console.log("green"),n.classList.add("haki");break;case"brown":console.log("brown"),n.classList.add("brown")}$.appendChild(r),$.appendChild(n)}));const z=document.querySelector(".min-count_card"),B=document.querySelector(".max-count_card"),_=document.querySelector(".num-count-card");let O=1;const W=()=>{O<10&&(O++,_.innerText=O)},H=()=>{O>1&&(O--,_.innerText=O)};z.addEventListener("click",H),B.addEventListener("click",W);let F=e.color;const j=4;s.innerHTML="",function(e,t,o,r){let n=0,c=!1;const a=document.querySelector(".text-same-card");e.forEach((e=>{if(n<r&&t&&e.color===t&&u!==e.id){const t=h(e);o.appendChild(t),n++,c=!0}})),c||(a.innerText="Нажаль схожих товарів не знайдено.",o.appendChild(a))}(f,F,s,j);let R=document.querySelector(".cta-popap");R.setAttribute("data-value",e.id),R.addEventListener("click",(function(e){e.preventDefault()})),btnSimilar()}(e),l.style.display="grid")}else console.error("error")}(0,e.id),R()})),o.appendChild(r);const n=document.createElement("img");n.src=e.img,n.alt=e.alt,n.setAttribute("data-src",e.img),n.setAttribute("data-alt",e.alt),o.appendChild(n);const c=document.createElement("h2");c.classList.add("header-card"),c.innerText=e.head,o.appendChild(c);const a=document.createElement("p");a.classList.add("old-price"),a.innerText=e.saleprice,o.appendChild(a);const i=document.createElement("p"),d=parseInt(e.price.replace(/\D/g,""));t.dataset.price=d,i.classList.add("new-price"),i.innerText=e.price,o.appendChild(i);const p=document.createElement("div");p.classList.add("input-block"),o.appendChild(p);const m=["40","41","42","43","44","45"];for(const t of m){const o=document.createElement("input");o.type="checkbox",o.name="size-radio",o.id=`input-${e.id}-${t}`,o.value=t;const r=document.createElement("label");r.classList.add(`label${t}`),r.setAttribute("for",`input-${e.id}-${t}`),r.innerText=`${t}`,o.disabled=!(`size${t}`in e),p.appendChild(o),p.appendChild(r)}const y=document.createElement("a");return y.classList.add("cta-card"),y.setAttribute("data-value",e.id),y.innerText=e.cta,y.href="#",o.appendChild(y),t}function v(e,t){t.innerHTML="",e.forEach((e=>{const o=h(e);t.appendChild(o)}))}v(f,a);document.querySelector(".back-to-main").addEventListener("click",(function(e){e.preventDefault(),l.style.display="none",document.querySelector(".same-card").innerHTML="",s.innerHTML=""}));const S=document.querySelectorAll(".card-cta-season"),g=document.querySelectorAll(".bottom-cart-season"),q=["winter","summer","demiseason"],L=localStorage.getItem("lastSelectedCategory");function b(e){f.forEach((t=>{v(f,a),setTimeout(updateCartBtns(),0),z();const o=document.querySelector(`.${t.category}`);o&&(o.style.display="#all"===e||e===`#${t.category}`?"block":"none")}))}i.addEventListener("click",(e=>{"BUTTON"===e.target.tagName&&(E=e.target.getAttribute("data-href"),localStorage.setItem("lastSelectedCategory",E),v(f,a),b(E),y(p),setTimeout(updateCartBtns(),0),z())}));let E=L;const T=new URLSearchParams(window.location.search);urlCategory=T.get("category"),urlHash=window.location.hash,selectedHash=urlHash||"#catalog",E=L||"#all",S.forEach((e=>{e.classList.add("card-cta-season"),e.addEventListener("mouseenter",(function(){e.classList.contains("selected")||e.classList.add("hovered")})),e.addEventListener("mouseleave",(function(){e.classList.remove("hovered")}))})),L||(E="#all",localStorage.setItem("lastSelectedCategory",E));const k=document.querySelector(`[data-href="${E}"]`);function b(e){q.forEach((t=>{document.querySelectorAll(`.${t}`).forEach((o=>{o.style.display=e===`${t}`||"#all"===e?"block":"none"}))}))}k&&k.classList.add("selected"),b(E),q.forEach((e=>{document.querySelectorAll(`.${e}`).forEach((t=>{t.style.display=E===`${e}`||"#all"===E?"block":"none"}))})),S.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),S.forEach((e=>{e.classList.remove("selected","hovered")})),e.classList.add("selected");let o=t.target.getAttribute("data-href");if("#all"===o){o="#all",localStorage.setItem("lastSelectedCategory",o);const e=window.location.origin+window.location.pathname+window.location.hash;window.history.replaceState({},"",e)}else{b(o);const e=window.location.origin+window.location.pathname+`?category=${o}#catalog`;window.history.replaceState({},"",e),localStorage.setItem("lastSelectedCategory",o)}v(f,a),b(o),setTimeout(updateCartBtns(),0),z()}))})),g.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=t.target.getAttribute("data-href");const r=window.location.origin+window.location.pathname+(o?`?category=${o}`:"")+"#catalog";window.history.replaceState({},"",r),localStorage.setItem("lastSelectedCategory",o);document.getElementById("catalog").scrollIntoView({behavior:"smooth"}),S.forEach((e=>{e.classList.remove("selected","hovered")})),S.forEach((e=>{e.getAttribute("data-href")===o&&e.classList.add("selected","hovered")})),e.classList.add("selected"),v(f,a),b(o),setTimeout(updateCartBtns(),0),z()}))}));document.querySelector(".select__input").addEventListener("change",(function(){!function(e){const t=document.querySelector(".select__input");switch(parseInt(t.value)){case 2:e.sort(((e,t)=>parseFloat(t.price)-parseFloat(e.price)));break;case 3:e.sort(((e,t)=>parseFloat(e.price)-parseFloat(t.price)));break;case 4:e.sort(((e,t)=>new Date(t.date)-new Date(e.date)));break;case 5:e.sort(((e,t)=>t.popularity-e.popularity))}}(f);y(p),I(),A(),updateCartBtns()}));document.querySelectorAll(".readmore").forEach((e=>{e.addEventListener("click",(function(){e.nextElementSibling.classList.toggle("visible"),e.classList.toggle("readmore-active")}))}));const C=document.querySelector(".cta-size-popap"),x=document.querySelector(".cancel-size-popap"),w=document.querySelector(".size-block_popap"),D=document.querySelector(".bg-size-popap");function I(){var e=document.querySelector("#pagination");if(e.innerHTML="",m>1){e.appendChild(P("←","arrow-pag prev",(function(){p>1&&(p--,y(p),I(),A())})));const t=4,o=Math.floor(t/2),r=Math.max(1,p-o),n=Math.min(m,r+t-1);r>1&&(e.appendChild(P(1,"",(function(){p=1,y(p),I(),A()}))),r>2&&e.appendChild(P("...","ellipsis",(function(){}))));for(let t=r;t<=n;t++)!function(t){e.appendChild(P(t,t===p?"active":"",(function(){p=t,y(p),I(),A()})))}(t);n<m&&(n<m-1&&e.appendChild(P("...","ellipsis",(function(){}))),e.appendChild(P(m,"",(function(){p=m,y(p),I(),A()})))),e.appendChild(P("→","arrow-pag next",(function(){p<m&&(p++,y(p),I(),A())})))}}function P(e,t,o){const r=document.createElement("button");return r.innerText=e,r.className=t,r.onclick=o,r}function A(){const e=document.querySelector("#pagination").getElementsByTagName("button");for(var t=0;t<e.length;t++){parseInt(e[t].innerText)===p?(e[t].classList.add("current-page"),e[t].disabled=!0):(e[t].classList.remove("current-page"),e[t].disabled=!1)}}C.addEventListener("click",(function(){w.style.display="block",D.style.display="block",w.classList.add("active-size-popap")})),x.addEventListener("click",(function(){w.style.display="none",D.style.display="none",w.classList.remove("active-size-popap")}));let M=null;function $(e){return Array.from(document.querySelectorAll(`input[name="${e}"]:checked`)).map((e=>e.value))}function N(e,t){return 0===t.length||t.some((t=>e.contains(t)))}function z(){document.querySelectorAll('input[type="checkbox"]').forEach((e=>{e.checked=!1}))}document.querySelectorAll('input[type="checkbox"], input[type="range"]').forEach((e=>{e.addEventListener("click",(function(){M&&(M.remove(),M=null),function(){const e=parseInt(document.querySelector(".input-min").value),t=parseInt(document.querySelector(".input-max").value),o=$("size"),r=$("color"),n=$("model"),c=$("season"),a=$("material"),i=$("style");let l=!1;if(!(q.forEach((s=>{document.querySelectorAll(`.${s}`).forEach((s=>{const d=N(s.classList,o)&&N(s.classList,r)&&N(s.classList,n)&&N(s.classList,c)&&N(s.classList,a)&&N(s.classList,i)&&function(e,t,o){const r=parseInt(e.dataset.price);return r>=t&&r<=o}(s,e,t);s.style.display=d?"grid":"none",d&&(l=!0)}))})),l||M)){const e=document.querySelector(".card-bott");M=document.createElement("div"),M.classList.add("any-block");const t=document.createElement("span");t.classList.add("icon-no-card"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M280-80q-83 0-141.5-58.5T80-280q0-83 58.5-141.5T280-480q83 0 141.5 58.5T480-280q0 83-58.5 141.5T280-80Zm544-40L568-376q-12-13-25.5-26.5T516-428q38-24 61-64t23-88q0-75-52.5-127.5T420-760q-75 0-127.5 52.5T240-580q0 6 .5 11.5T242-557q-18 2-39.5 8T164-535q-2-11-3-22t-1-23q0-109 75.5-184.5T420-840q109 0 184.5 75.5T680-580q0 43-13.5 81.5T629-428l251 252-56 56Zm-615-61 71-71 70 71 29-28-71-71 71-71-28-28-71 71-71-71-28 28 71 71-71 71 28 28Z"/></svg>';const o=document.createElement("p");o.classList.add("no-card"),o.innerText="Нажаль, за вашим вибором не знайдено жодного товару",M.appendChild(t),M.appendChild(o),e.appendChild(M)}}()}))}));const B=document.querySelectorAll(".slider-images img"),_=document.querySelector(".arr-left"),O=document.querySelector(".arr-right"),W=document.querySelectorAll(".slide-description");let H=0;function F(){W[H].classList.remove("active"),B[H].classList.remove("active"),H=(H+1)%B.length,B[H].classList.add("active"),W[H].classList.add("active")}F();let j=setInterval(F,3e3);_.addEventListener("click",(function(){clearInterval(j),W[H].classList.remove("active"),B[H].classList.remove("active"),H=(H-1+B.length)%B.length,B[H].classList.add("active"),W[H].classList.add("active"),j=setInterval(F,3e3)})),O.addEventListener("click",(function(){clearInterval(j),F(),j=setInterval(F,3e3)}));const R=document.querySelector(".cart"),Z=document.querySelector("#basket-popup-outline"),Q=document.querySelectorAll(".basket-back"),U=document.querySelector("body");function V(){Z.classList.toggle("d-block"),U.classList.toggle("hidden")}R.addEventListener("click",V),Q.forEach((function(e){e.addEventListener("click",V)})),fetch("products.json").then((e=>e.json())).then((e=>{f=e,m=Math.ceil(f.length/d),y(p),I(),b(E);const t=document.querySelectorAll(".range-input input"),o=document.querySelectorAll(".price-input input"),r=document.querySelector(".slider .progress"),n=Math.min(...f.map((e=>parseInt(e.price)))),c=Math.max(...f.map((e=>parseInt(e.price))));o.forEach((e=>{o[0].setAttribute("value",n),o[1].setAttribute("value",c),e.addEventListener("input",(e=>{let n=parseInt(o[0].value),c=parseInt(o[1].value);c-n>=10&&c<=t[1].max&&("input-min"===e.target.className?(t[0].value=n,r.style.left=n/t[0].max*100+"%"):(t[1].value=c,r.style.right=100-c/t[1].max*100+"%"))}))})),t.forEach((e=>{t[0].setAttribute("value",n),t[1].setAttribute("value",c),t[0].setAttribute("min",n),t[0].setAttribute("max",c),t[1].setAttribute("min",n),t[1].setAttribute("max",c),e.addEventListener("input",(e=>{let n=parseInt(t[0].value),c=parseInt(t[1].value);c-n<10?"range-min"===e.target.className?t[0].value=c-10:t[1].value=n+10:(o[0].value=n,o[1].value=c,r.style.left=n/t[0].max*100+"%",r.style.right=100-c/t[1].max*100+"%")}))})),document.querySelector('a.bottom-cart-season[data-href="discount"]').addEventListener("click",(function(e){e.preventDefault(),v(f.filter((e=>""!==e.saleprice)),a),setTimeout(updateCartBtns(),0),z()}))})).catch((e=>console.error("Помилка завантаження даних:",e)));let J=document.querySelector(".img-carousel"),G=document.querySelectorAll(".step-block");const K=document.querySelectorAll(".img-carousel img");!function(){let e=0;G.forEach((function(t){e+=t.getBoundingClientRect().height})),window,innerHeight>=960&&(J.style.height=e+40+"px")}();let X=0;setInterval((function(){K[X].classList.remove("active"),X=(X+1)%K.length,K[X].classList.add("active")}),3e3)}));let orderDetailSum=document.querySelector(".order-total-price"),orderWithDiscountPrice=document.querySelector(".price-totally b"),orderWithDiscountPriceCalc=0,numberOfProductsDOM=document.querySelector(".calc-added-products"),caclnumberOfProducts=0,addedProductsList=document.querySelector(".added-products-list "),orderDiscount=document.querySelector(".order-discount"),orderDiscountCalc=0;orders={};const cartWaitTimeout=setTimeout((function(){cart()}),1e3);function buyBtnFunc(e,t,o,r){0===t.length?showToast("Спочатку виберіть розмір товару","info",5e3):(showToast("Товар успішно додано","success",5e3),document.querySelector(".popap-card").style.display="none",document.querySelector(".same-card")&&(document.querySelector(".same-card").innerHTML="")),Object.keys(orders).length<=3&&(addedProductsList.innerHTML="");let n=e.dataset.value;fetch("products.json").then((e=>e.json())).then((e=>{const c=e.find((e=>e.id===n));""===c.saleprice&&(c.saleprice=c.price);for(let e=0;e<t.length;e++)if(orders[n+t[e]])if(o)for(let r=o;r>0;r--)console.log(r),document.querySelector(".plus-quantity[data-value='"+n+t[e]+"']").click();else t.length>1?document.querySelector(".plus-quantity[data-value='"+n+t[e]+"']").click():document.querySelector(".plus-quantity[data-value='"+n+t[0]+"']").click();else orders[n+t[e]]={product:c,quantity:o?Number(o):1},t&&(orders[n+t[e]].size=t[e]),orders.orderSumWithNoDiscount+=""!=orders[n+t[e]].product.saleprice?Number(orders[n+t[e]].product.saleprice.slice(0,-4))*orders[n+t[e]].quantity:0,orders.orderSumWithDiscount+=Number(orders[n+t[e]].product.price.slice(0,-4))*orders[n+t[e]].quantity,updateCart(n,orders[n+t[e]].size,r),plusBtn(".plus-quantity[data-value='"+n+t[e]+"']"),minBtn(".minus-quantity[data-value='"+n+t[e]+"']"),o?caclnumberOfProducts+=Number(o):caclnumberOfProducts++,numberOfProductsDOM.innerText=caclnumberOfProducts,orderDiscountCalc+=o?(Number(orders[n+t[e]].product.saleprice.slice(0,-4))-Number(orders[n+t[e]].product.price.slice(0,-4)))*Number(o):(Number(orders[n+t[e]].product.saleprice.slice(0,-4))-Number(orders[n+t[e]].product.price.slice(0,-4)))*orders[n+t[e]].quantity,orderDiscount.innerText=orderDiscountCalc,orderDetailSum.innerText=0!=orders.orderSumWithNoDiscount?orders.orderSumWithNoDiscount:orders.orderSumWithDiscount,orderWithDiscountPrice.innerText=orders.orderSumWithDiscount}))}function updateCart(e,t,o){fetch("products.json").then((e=>e.json())).then((r=>{const n=r.find((t=>t.id===e)),c=o||n.color,a=(n.color,document.createElement("div"));a.innerHTML=`\n            <div class="basket-card flex-between" data-value=${n.id+""+t}>\n                <img src='${n.img}'>\n                \n                <div class="w-100 flex-between items-center">\n                    <div class="description">\n                        <div>\n                            <h3>${n.head}</h3>\n                            <table>\n                                <tr>\n                                    <td>колір</td>\n                                    <td>${c}</td>\n                                </tr>\n                                <tr>\n                                    <td>розмір</td>\n                                    <td class="size-span">${t}</td>\n                                </tr>\n                                <tr>\n                                    <td>ціна</td>\n                                    <td>${n.price} <span>${n.saleprice}</span></td>\n                                </tr>\n                                <tr>\n                                    <td>кількість</td>\n                                    <td>\n                                        <div class="quantity flex">\n                                            <div class="minus-quantity" data-value="${n.id+""+t}">-</div>\n                                            <div class="quantity-number">${orders[n.id+t].quantity}</div>\n                                            <div class="plus-quantity" data-value="${n.id+""+t}">+</div>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                            <div class="delete-product">видалити товар</div>\n                        </div>\n                    </div>\n                    <div class="total-price">\n                        <span>${Number(orders[n.id+t].product.price.slice(0,-4))*orders[n.id+t].quantity+" грн"}</span>\n                    </div>\n                </div>\n            </div>\n        `,addedProductsList.appendChild(a)}))}function cart(){if(document.querySelectorAll(".cta-card")){clearTimeout(cartWaitTimeout);document.querySelectorAll(".cta-card"),document.querySelector("#orderConfirmProductsQuantity");document.querySelectorAll(".cta-card").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const o=this.getAttribute("data-value"),r=[];document.querySelectorAll(`input[type="checkbox"][id^="input-${o}"]:checked`).forEach((e=>{r.push(e.value)})),buyBtnFunc(e,r)}))})),document.querySelectorAll(".cta-popap").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const o=this.getAttribute("data-value"),r=[];let n="";document.querySelectorAll(`.popap-card input[type="checkbox"][id^="popup-input-${o}"]:checked`).forEach((e=>{r.push(e.value)})),document.querySelectorAll('.popap-card input[name="color-popap"]:checked').forEach((e=>{n=e.value}));let c=document.querySelector(".popap-card .quantity-number");console.log(document.querySelectorAll(`choise-size_popap input[type="checkbox"][id^="popup-input-${o}"]:checked`)),console.log(e),console.log(r),console.log(c.innerText),buyBtnFunc(e,r,c.innerText,n)}))}))}}const inputMasks=document.querySelectorAll(".inputMask");function plusBtn(e){fetch("products.json").then((e=>e.json())).then((t=>{document.querySelector(e).addEventListener("click",(function(){let e=this.dataset.value,o=this.dataset.value.slice(0,-2);t.find((e=>e.id===o));const r=e;if(orders[r]){orders[r].quantity+=1;const t=addedProductsList.querySelector('[data-value="'+e+'"] .total-price span'),o=addedProductsList.querySelector('[data-value="'+e+'"] .quantity-number');t.innerText=orders[r].product.price.slice(0,-4)*orders[r].quantity+" грн",o.innerText=orders[r].quantity,orders.orderSumWithNoDiscount+=0!==orders[r].product.saleprice?Number(orders[r].product.saleprice.slice(0,-4)):0,orders.orderSumWithDiscount+=Number(orders[r].product.price.slice(0,-4))}orderDetailSum.innerText=0!=orders.orderSumWithNoDiscount?orders.orderSumWithNoDiscount:orders.orderSumWithDiscount,orderWithDiscountPrice.innerText=orders.orderSumWithDiscount,caclnumberOfProducts++,numberOfProductsDOM.innerText=caclnumberOfProducts,orderDiscountCalc+=Number(orders[o+e.slice(-2)].product.saleprice.slice(0,-4))-Number(orders[o+e.slice(-2)].product.price.slice(0,-4)),orderDiscount.innerText=orderDiscountCalc}))}))}function minBtn(e){fetch("products.json").then((e=>e.json())).then((t=>{document.querySelector(e).addEventListener("click",(function(){let e=this.dataset.value,o=e.slice(0,-2);t.find((e=>e.id===o));const r=e;if(orders[r]&&1!==orders[r].quantity){orders[r].quantity-=1;const t=addedProductsList.querySelector('[data-value="'+r+'"] .total-price span'),n=addedProductsList.querySelector('[data-value="'+r+'"] .quantity-number');orders[r].totalPrice=Number(orders[r].product.price.slice(0,-4))*orders[r].quantity,t.innerText=orders[r].totalPrice+" грн",n.innerText=orders[r].quantity,orders.orderSumWithNoDiscount-=""!=orders[r].product.saleprice?Number(orders[r].product.saleprice.slice(0,-4)):0,orders.orderSumWithDiscount-=Number(orders[r].product.price.slice(0,-4)),1!==n&&caclnumberOfProducts--,numberOfProductsDOM.innerText=caclnumberOfProducts,orderDetailSum.innerText=0!=orders.orderSumWithNoDiscount?orders.orderSumWithNoDiscount:orders.orderSumWithDiscount,orderWithDiscountPrice.innerText=orders.orderSumWithDiscount,orderDiscountCalc-=Number(orders[o+e.slice(-2)].product.saleprice.slice(0,-4))-Number(orders[o+e.slice(-2)].product.price.slice(0,-4)),orderDiscount.innerText=orderDiscountCalc}}))}))}function sendData(e){const t=JSON.stringify(e);document.querySelector("#orderProductsObject").value=t}function btnSimilar(){document.querySelectorAll(".popap-card .cta-card").forEach((function(e){e.addEventListener("click",(function(){let t=this.dataset.value,o=[];document.querySelectorAll(`.popap-card input[type="checkbox"][id^="input-${t}"]:checked`).forEach((e=>{o.push(e.value)})),buyBtnFunc(e,o)}))}))}inputMasks.forEach((function(e){e.value="+38",e.addEventListener("input",(function(){let t=e.value.replace(/[^\d+]/g,"");e.value=t,t.length>13&&(e.value=t.slice(0,13)),t.startsWith("+38")||(e.value="+38"+t.slice(3))}))})),document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("click",(function(e){if(e.target.classList.contains("delete-product")){const t=e.target.closest(".basket-card"),o=t.dataset.value;if(orders[o]){orders[o].size;caclnumberOfProducts-=orders[o].quantity,numberOfProductsDOM.innerText=caclnumberOfProducts,orders.orderSumWithNoDiscount-=Number(orders[o].product.saleprice.slice(0,-4))*orders[o].quantity,orderDetailSum.innerText=orders.orderSumWithNoDiscount,orderDiscountCalc-=(Number(orders[o].product.saleprice.slice(0,-4))-Number(orders[o].product.price.slice(0,-4)))*orders[o].quantity,orderDiscount.innerText=orderDiscountCalc,orders.orderSumWithDiscount-=Number(orders[o].product.price.slice(0,-4))*orders[o].quantity,orderWithDiscountPrice.innerText=orders.orderSumWithDiscount,delete orders[o],t.remove(),Object.keys(orders).length<=3&&(addedProductsList.innerHTML='\n                    <div class="basket-empty">\n                        <p>Кошик порожній </p>\n                    </div>\n                    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 90 90" viewBox="0 0 90 90" width="256" height="256"><path d="M50.065 35.729c4.385 0 8.703 1.913 12.391 5.438.973.851 1.041 2.348.15 3.28-.896.938-2.391.938-3.281.005-3.01-2.883-6.172-4.188-9.26-4.188-3.084 0-6.24 1.304-9.25 4.188-.434.427-1.027.662-1.637.646-2.031-.052-2.979-2.545-1.488-3.932C41.372 37.642 45.685 35.729 50.065 35.729zM59.513 26.78c1.813 0 3.287 1.477 3.287 3.291 0 1.815-1.475 3.285-3.287 3.285s-3.281-1.47-3.281-3.285C56.231 28.256 57.7 26.78 59.513 26.78zM40.628 26.78c1.813 0 3.281 1.477 3.281 3.291 0 1.815-1.469 3.285-3.281 3.285-1.818 0-3.287-1.47-3.287-3.285C37.341 28.256 38.81 26.78 40.628 26.78zM10.237 5.269c-4.422.125-5.125 6.795-.844 7.958l5.582 1.971 6.568 34.245c.787 4.098 2.088 7.807 3.906 10.998 2.672 4.699 7.313 8.167 13.037 8.167h28.426c5.131.093 5.131-8.116 0-8.021H38.487c-4.047-.516-5.725-2.555-7.209-5.544H68.8c3.441 0 5.363-3.056 6.213-6.591l8.207-27.92c.438-4.59-1.994-5.496-6.25-5.496l-53.904.041-1.449-4.428c-.391-1.318-1.391-2.336-2.645-2.69L10.237 5.269zM40.425 72.697c-3.359 0-6.084 2.727-6.084 6.086 0 3.363 2.725 6.09 6.084 6.09s6.078-2.727 6.078-6.09C46.503 75.424 43.784 72.697 40.425 72.697zM64.663 72.697c-3.354 0-6.078 2.727-6.078 6.086 0 3.363 2.725 6.09 6.078 6.09 3.359 0 6.084-2.727 6.084-6.09C70.747 75.424 68.022 72.697 64.663 72.697z" fill="#cccccc" class="color000 svgShape"></path></svg>')}}}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#openConfirmPopup"),t=document.querySelector("#popup-confirm-outline"),o=document.querySelectorAll(".confirm-back");e.addEventListener("click",(function(){if(Object.keys(orders).length>3){t.classList.toggle("d-block"),sendData(orders);let e=document.querySelector("#confirmPrice"),o=document.querySelector("#confirmTotalPrice");orderConfirmProductsQuantity.innerText=caclnumberOfProducts+" ",o.innerText=orders.orderSumWithDiscount+" грн",e.innerText=orders.orderSumWithNoDiscount+" грн"}else showToast("Спочатку оберіть бажаний товар","info",5e3)})),o.forEach((function(e){e.addEventListener("click",(function(){t.classList.toggle("d-block")}))}))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".openPayAndDeliveryPopup"),t=document.querySelectorAll(".exchangeAndReturn"),o=document.querySelector("#deliveryPopup"),r=document.querySelector("#exchangePopup");e.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),o.classList.toggle("d-block")}))})),t.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),r.classList.toggle("d-block")}))}));const n=document.querySelector(".privacyPolice"),c=document.querySelector("#privacyPolice"),a=document.querySelector(".back-privacy"),i=document.querySelector("#oferta"),l=document.querySelector(".oferta"),s=document.querySelector(".back-oferta");n.addEventListener("click",(function(e){e.preventDefault(),c.classList.add("d-block")})),a.addEventListener("click",(function(){c.classList.remove("d-block")})),l.addEventListener("click",(function(e){e.preventDefault(),i.classList.add("d-block")})),s.addEventListener("click",(function(){i.classList.remove("d-block")}))}));let icon={success:'<span class="material-symbols-outlined"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30" x="0" y="0" viewBox="0 0 24 24" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><g fill="#20bf55" data-name="Flat Color"><path d="M12 22.75a10.75 10.75 0 0 1 0-21.5 10.53 10.53 0 0 1 4.82 1.15.75.75 0 0 1-.68 1.34 9 9 0 0 0-4.14-1A9.25 9.25 0 1 0 21.25 12a2 2 0 0 0 0-.25.75.75 0 1 1 1.5-.14V12A10.76 10.76 0 0 1 12 22.75z" fill="#045d22" opacity="1" data-original="#20bf55" class=""></path><path d="M11.82 15.41a.7.7 0 0 1-.52-.22l-4.83-4.74a.75.75 0 0 1 0-1.06.77.77 0 0 1 1.07 0l4.29 4.23 9.65-9.49a.77.77 0 0 1 1.07 0 .75.75 0 0 1 0 1.06l-10.18 10a.74.74 0 0 1-.55.22z" fill="#045d22" opacity="1" data-original="#20bf55" class=""></path></g></g></svg></span>',info:'<span class="material-symbols-outlined"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30" x="0" y="0" viewBox="0 0 330 330" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M165 0C74.019 0 0 74.02 0 165.001 0 255.982 74.019 330 165 330s165-74.018 165-164.999S255.981 0 165 0zm0 300c-74.44 0-135-60.56-135-134.999S90.56 30 165 30s135 60.562 135 135.001C300 239.44 239.439 300 165 300z" fill="#000000" opacity="1" data-original="#000000" class=""></path><path d="M164.998 70c-11.026 0-19.996 8.976-19.996 20.009 0 11.023 8.97 19.991 19.996 19.991 11.026 0 19.996-8.968 19.996-19.991 0-11.033-8.97-20.009-19.996-20.009zM165 140c-8.284 0-15 6.716-15 15v90c0 8.284 6.716 15 15 15 8.284 0 15-6.716 15-15v-90c0-8.284-6.716-15-15-15z" fill="#000000" opacity="1" data-original="#000000" class=""></path></g></svg></span>'};const showToast=(e="Sample Message",t="info",o=5e3)=>{Object.keys(icon).includes(t)||(t="info");let r=document.createElement("div");r.classList.add("toast",`toast-${t}`),r.innerHTML=` <div class="toast-content-wrapper"> \n                      <div class="toast-icon"> \n                      ${icon[t]} \n                      </div> \n                      <div class="toast-message">${e}</div> \n                      <div class="toast-progress"></div> \n                      </div>`,o=o||5e3,r.querySelector(".toast-progress").style.animationDuration=o/1e3+"s";let n=document.body.querySelector(".toast");n&&n.remove(),document.body.appendChild(r)};let submit=document.querySelector(".custom-toast.success-toast"),information=document.querySelector(".custom-toast.info-toast"),failed=document.querySelector(".custom-toast.danger-toast"),warn=document.querySelector(".custom-toast.warning-toast");document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("form.order-confirm-form");function t(e){return Array.from(e).some((e=>e.checked))}e.addEventListener("submit",(o=>{const r=e.querySelectorAll("input[name='deliveryMethod']"),n=e.querySelectorAll("input[name='paymenttype']");if(!t(r)||!t(n))return showToast("Заповніть всі обов'язкові поля.","info",5e3),void o.preventDefault();const c=e.querySelectorAll(".order-form input");for(const e of c)if(!e.value.trim())return showToast("Заповніть всі обов'язкові поля.","info",5e3),void o.preventDefault();const a=e.querySelector("input[name='userPhone']");return i=a.value.trim(),/\+380[0-9]{9}$/.test(i)?void 0:(showToast("Введіть коректний номер телефону.","info",5e3),void o.preventDefault());var i}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("form.review-form");e.addEventListener("submit",(t=>{const o=document.getElementById("userRate"),r=e.querySelector("input[name='userName']"),n=e.querySelector("input[name='userFirstName']"),c=e.querySelector("textarea[name='userReview']");return o.value.trim()?r.value.trim()&&n.value.trim()&&c.value.trim()?void 0:(showToast("Заповніть всі обов'язкові поля","info",5e3),void t.preventDefault()):(showToast("Оцініть товар","info",5e3),void t.preventDefault())}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("form[action='sendtelegram.php']");e.addEventListener("submit",(t=>{const o=e.querySelector("input[name='userTel']");if(!o.value.trim()||(r=o.value,!/\+380[0-9]{9}$/.test(r)))return showToast("Введіть коректний номер телефону","info",5e3),void t.preventDefault();var r}))}));
>>>>>>> cec5e59b1b1bd841521e807a9d0c024b561e0b5b
